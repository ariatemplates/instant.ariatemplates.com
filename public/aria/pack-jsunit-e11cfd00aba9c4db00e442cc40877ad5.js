/*
 * Aria Templates 1.4.4 - 22 May 2013
 *
 * Copyright 2009-2013 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//***MULTI-PART
//*******************
//LOGICAL-PATH:aria/jsunit/AppletWorker.js
//*******************
(function(){var t,e,i;Aria.$global.AppletCallback=function(){null!=t&&(t.call(e,i),t=null,e=null,i=null)},Aria.classDefinition({$classpath:"aria.jsunit.AppletWorker",$singleton:!0,$constructor:function(){this._applet=null,this._appletName=null,this._isReady=!1},$destructor:function(){},$prototype:{init:function(t){if(null==this._applet&&(this._appletName=0,this._applet=this._addApplet(t),this._isReady=!0,!this._applet))throw Error(this._appletName+" applet was not found in the document")},_addApplet:function(t){var e=Aria.$frameworkWindow.document.getElementById(t),i="<APPLET name='myTestApplet' code='ScreenCaptureApplet.class' archive='ScreenCapture.jar' width='1000' height='100' MAYSCRIPT></APPLET>";return e.innerHTML=i,this._getApplet()},_getApplet:function(){return Aria.$frameworkWindow.document.applets[this._appletName]||null},sendInstruction:function(s){t=s.cb,e=s.scope,i=s.args,this._applet.setInstruction(s.instruction,"AppletCallback")},getResponse:function(){var t=this._applet.getResponse(),e=1,i="No response yet - Retry later";if(-1!=t.indexOf(";")){var s=t.split(";");e=s[0],s.length>1&&(i=s[1])}return{code:e,reason:i}},isReady:function(){return this._isReady}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/Test.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.Test",$events:{failure:"",error:"",stateChange:"",start:"",end:"",testLoad:"",preloadEnd:""},$constructor:function(){this._isFinished=!1,this._parentTest=null,this._executionTime=-1,this._errors=[],this._failedOnCreate=!1,this.$JsObject.constructor.call(this)},$destructor:function(){if(this._parentTest=null,!this._failedOnCreate){var t=Aria.getClassRef(this.$classpath);if(aria.core.ClassMgr.unloadClass(this.$classpath),t&&t.classDefinition&&t.classDefinition.$dependencies)for(var e=t.classDefinition.$dependencies,i=0,s=e.length;s>i;i+=1)"test."==e[i].substring(0,5)&&aria.core.ClassMgr.unloadClass(e[i])}this.$JsObject.$destructor.call(this)},$prototype:{run:function(){},_startTest:function(){this._timestampBegin=(new Date).getTime()},_endTest:function(){this._timestampEnd=(new Date).getTime(),this._executionTime=this._timestampEnd-this._timestampBegin},getExecutionTime:function(){return this._executionTime},setParentTest:function(t){this._parentTest=t},getParentTest:function(){return this._parentTest},isFinished:function(){return this._isFinished===!0},getFinishedTestsCount:function(){return this._testPassed},init:function(){this.$raiseEvent({name:"preloadEnd",testSuite:this})},hasError:function(){return this.getErrors().length>0},getErrors:function(){return this._errors},hasWarning:function(){return!1},getExecutionErrors:function(){for(var t=[],e=this.getErrors(),i=0,s=e.length;s>i;i++){var a=e[i];a.type==this.ERROR_TYPES.ERROR&&t.push(a)}return t},getFailures:function(){for(var t=[],e=this.getErrors(),i=0,s=e.length;s>i;i++){var a=e[i];a.type==this.ERROR_TYPES.FAILURE&&t.push(a)}return t},raiseError:function(t,e){var i=t.description?t.description:t.message;i="["+i+"]",e&&(i+=" "+e),this._errors.push({type:this.ERROR_TYPES.ERROR,testMethod:this._currentTestName,description:i}),this.$raiseEvent({name:"error",testClass:this.$classpath,testState:this._currentTestName,exception:t,msg:i})},raiseFailure:function(t){this._errors.push({type:this.ERROR_TYPES.FAILURE,testMethod:this._currentTestName,description:t}),this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:t})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/Assert.js
//*******************
(function(){var t=Aria.$global.console,e=function(t,i){if(t===i)return null;if(typeof i!=typeof t)return[];if("object"==typeof i||"array"==typeof i)for(var s in i){var a=e(t[s],i[s]);if(null!=a)return a.unshift(s),a}else if(t!=i)return[];return null};Aria.classDefinition({$classpath:"aria.jsunit.Assert",$extends:"aria.jsunit.Test",$statics:{ERROR_TYPES:{ERROR:"error",FAILURE:"failure"}},$dependencies:["aria.core.log.SilentArrayAppender","aria.core.Log"],$constructor:function(){this.$Test.constructor.call(this),this._currentTestName="",this._assertCount=0,this._totalAssertCount=0,this._overriddenClasses=null,this._expectedEventsList=null,this._eventIndexInList=0,this.evtLogs=[],aria.core.Log.clearAppenders(),aria.core.Log.addAppender(new aria.core.log.SilentArrayAppender),Aria.verbose&&aria.core.Log.addAppender(new aria.core.log.DefaultAppender),aria.core.Log.resetLoggingLevels(),aria.core.Log.setLoggingLevel("*",1)},$destructor:function(){this._expectedEventsList=null,this.$Test.$destructor.call(this)},$prototype:{ASSERT_FAILURE:"Assert Failure",_startTest:function(){this.$Test._startTest.call(this),this._totalAssertCount=0,this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath})},_endTest:function(){this.$Test._endTest.call(this),this.checkExpectedEventListEnd(),this.resetClassOverrides(),this.assertLogsEmpty(!1,!1),this._assertCount=0,this._currentTestName="",this._isFinished=!0,this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._totalAssertCount})},_updateAssertInfo:function(t){this._assertCount=0,this._currentTestName=t,this.$raiseEvent({name:"stateChange",testClass:this.$classpath,testState:this._currentTestName})},assertTrue:function(e,i){if(this._assertCount++,this._totalAssertCount++,e!==!0){var s="Assert #"+this._assertCount+" failed";throw i&&(s+=" : "+i),this.raiseFailure(s),t&&aria.utils.Type.isFunction(t.trace)&&t.assert(!1,"Stack trace for failed Assert #"+this._assertCount+" in test : ["+this._currentTestName+"]"),{name:this.ASSERT_FAILURE,message:s}}},assertFalse:function(t,e){this.assertTrue(t===!1,e||"Expected false. Got: "+t)},assertEquals:function(t,e,i){var s;s=i?aria.utils.String.substitute(i,['"'+t+'"','"'+e+'"']):'First value: "'+t+'" differs from the second: "'+e+'".',this.assertTrue(t===e,s)},assertEqualsWithTolerance:function(t,e,i,s){var a;a=s?aria.utils.String.substitute(s,['"'+t+'"','"'+e+'"']):"First value: "+t+", second value: "+e+", tolerance was: "+i,this.assertTrue(i>=Math.abs(t-e),a)},assertNotEquals:function(t,e,i){var s=i||"First and second value shouldn't be equal but they are both equal to: "+t;this.assertTrue(t!==e,s)},assertLogsEmpty:function(e,i){i!==!1&&(this._assertCount++,this._totalAssertCount++);var s=aria.core.Log.getAppenders()[0];if(!s.isEmpty()){for(var a=s.getLogs(),n=!1,r="",o=0;a.length>o;o++){var l=a[o];"error"==l.level&&(n=!0,r="Uncaught error detected: ["+l.className+"] "+l.msg,l.objOrErr&&t&&aria.utils.Type.isFunction(t.error)&&t.error(this.$classpath+"."+this._currentTestName+": "+r,l.objOrErr),this.raiseFailure(r))}if(s.empty(),n&&e!==!1)throw{name:this.ASSERT_FAILURE,message:r}}},assertErrorInLogs:function(t,e){var i=aria.core.Log.getAppenders()[0],s=i.getLogs(),a=!1,n=[];if(t||this.assertTrue(!1,"assertErrorInLogs was called with a null error message."),e&&e>0){for(var r=0,o=0;s.length>o;o++)e>r&&s[o].msgId==t?r++:n.push(s[o]);i.setLogs(n),this.assertTrue(r==e,"Expected error "+t+" found "+r+" times in logs")}else{for(var o=0;s.length>o;o++)s[o].msgId==t?a=!0:n.push(s[o]);i.setLogs(n),this.assertTrue(a,"Expected error not found in logs: "+t)}},assertJsonContains:function(t,e,i){this.assertTrue(aria.utils.Json.contains(t,e),i)},assertJsonEquals:function(t,e,i){if(!i){var s={indent:"   "},a=aria.utils.Json.convertToJsonString(t,s),n=aria.utils.Json.convertToJsonString(e,s);i="JSON comparison failed. First object:<br><code><pre>"+a+"</pre></code> differs from the second:<br><code><pre>"+n+"</pre></code>"}this.assertTrue(aria.utils.Json.equals(t,e),i)},assertJsonNotEquals:function(t,e,i){this.assertFalse(aria.utils.Json.equals(t,e),i)},fail:function(t){var e="Forced Failure";throw t&&(e+=" ("+t+")"),this.raiseFailure(e),{name:this.ASSERT_FAILURE,message:e}},registerObject:function(t){t.$on({"*":this._logEvent,scope:this})},unregisterObject:function(t){t.$removeListeners({"*":this._logEvent,scope:this})},_logEvent:function(t){this.evtLogs.push(t)},assertEventFired:function(t,e){e=e||"Event "+t+" not fired",this.assertTrue(this.__hasEvent(t),e)},assertEventNotFired:function(t,e){e=e||"Event "+t+" fired",this.assertFalse(this.__hasEvent(t),e)},getEvent:function(t){for(var e=0;this.evtLogs.length>e;e++)if(this.evtLogs[e].name==t)return this.evtLogs[e];return null},__hasEvent:function(t){return null!==this.getEvent(t)},clearLogs:function(){for(;this.evtLogs.length>0;)this.evtLogs.pop()},registerExpectedEventsList:function(t){if("object"!=typeof t)throw"registerExpectedEventsList error";this._expectedEventsList=t,this._eventIndexInList=0,0===this._expectedEventsList.length&&(this._expectedEventsList=null)},checkExpectedEvent:function(t){if(this._expectedEventsList){var i=this._expectedEventsList[this._eventIndexInList],s=e(t,i);s&&this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Event does not respect what was expected (expected: "+i.name+", occured: "+t.name+", unmatching property: "+s.join(".")+")"}),this._eventIndexInList++,this._eventIndexInList>=this._expectedEventsList.length&&(this._expectedEventsList=null)}else this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Unexpected event: "+t.name})},checkExpectedEventListEnd:function(){null!=this._expectedEventsList&&(this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Not all expected events have occured. First missing event (#"+this._eventIndexInList+"): "+this._expectedEventsList[this._eventIndexInList].name}),this._expectedEventsList=null)},overrideClass:function(t,e){null==this._overriddenClasses&&(this._overriddenClasses={});var i=this._overriddenClasses[t];if(null==i){var s=Aria.nspace(t);if(null==s)return;var a=t.lastIndexOf(".");i=a>-1?{clsNs:t.slice(0,a),clsName:t.slice(a+1),initialClass:s}:{clsNs:"",clsName:t,initialClass:s},this._overriddenClasses[t]=i}var n=Aria.nspace(i.clsNs);n[i.clsName]=e},resetClassOverrides:function(){if(null!=this._overriddenClasses){for(var t in this._overriddenClasses){var e=this._overriddenClasses[t],i=Aria.nspace(e.clsNs);i[e.clsName]=e.initialClass}this._overriddenClasses=null}},checkEvent:function(t){try{this.assertTrue("object"==typeof t&&"string"==typeof t.name&&"object"==typeof t.src&&"object"==typeof t.src.$events,"The object passed to checkEvent is not an event.");var e=t.src.$events[t.name];this.assertTrue(null!=e,'The event "'+t.name+'" is not defined in '+t.src.$classpath);for(var i in t)"src"!=i&&"name"!=i&&this.assertTrue(null!=e.properties[i],'Undocumented event property "'+i+'" in '+t.name+" from "+t.src.$classpath)}catch(s){}}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/ConnectionSession.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ConnectionSession",$constructor:function(t){this.requestUrl="",this.ioRequest=null,this.ioResponse=null,t.ioRequest&&this.setIORequest(t.ioRequest)},$destructor:function(){this.ioRequest=null,this.ioResponse=null},$prototype:{setIORequest:function(t){this.ioRequest=t,this.requestUrl=t.url},setIOResponse:function(){this.ioResponse=this.ioRequest.res,this.requestUrl=this.ioRequest.url},getRequestUrl:function(){return this.requestUrl}}});
//*******************
//LOGICAL-PATH:aria/jsunit/IOViewer.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.IOViewer",$singleton:!0,$constructor:function(){this._outputDiv=null,this._requests=[]},$destructor:function(){this._outputDiv=null,this._requests=null,aria.core.IO.$unregisterListeners(this)},$prototype:{outputDivId:"_IOViewerOutput_",run:function(){var t=Aria.$window.document,e=t.getElementById(this.outputDivId);null==e&&(e=t.createElement("div"),t.body.appendChild(e)),this._outputDiv=e,aria.core.IO.$on({request:this._onRequest,response:this._onResponse,scope:this}),this._refreshDisplay()},_onRequest:function(t){this._requests[t.req.id]=t.req,this._refreshDisplay()},_onResponse:function(){this._refreshDisplay()},_refreshDisplay:function(){for(var t=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">IO Report</span>',"<hr/>",'<div style="padding: 3px;font-size: 12px; font-weight: bold;font-family:Arial">',"Requests: ",aria.core.IO.nbRequests," (pending: ",aria.core.IO.nbRequests-aria.core.IO.nbOKResponses-aria.core.IO.nbKOResponses,", OK: ",aria.core.IO.nbOKResponses,", failed: ",aria.core.IO.nbKOResponses,")<br />Traffic: ",aria.core.IO.trafficDown+aria.core.IO.trafficUp," bytes (down: ",aria.core.IO.trafficDown," bytes, up: ",aria.core.IO.trafficUp," bytes)","</div>",'<table style="font-size:12px;font-family:Arial; width:100%;">','<tr style="font-weight: bold;">','<td style="width: 50px;">Method</td>',"<td>URL</td>",'<td style="text-align: right; width: 50px;">Up</td>','<td style="text-align: right; width: 50px;">Down</td>','<td style="text-align: right; width: 50px;">Status</td>','<td style="width: 250px;">Result</td>','<td style="width: 80px;">Duration</td>',"</tr>"],e=this._requests.length-1;e>=0;e--){var i=this._requests[e];if(i){var s;if(i.res)s=['<tr style="',"200"==i.res.status?"color: green;":"color: red;",'">',"<td>",i.method,"</td>",'<td style="font-weight: bold;">',i.url,"</td>",'<td style="text-align: right;">',i.requestSize,"</td>",'<td style="text-align: right;">',i.responseSize,"</td>",'<td style="text-align: right;">',i.res.status,"</td>","<td>",i.res.error?i.res.error:"OK","</td>","<td>",i.downloadTime," ms</td>"];else var s=["<tr>","<td>",i.method,"</td>",'<td style="font-weight: bold;">',i.url,"</td>",'<td style="text-align: right;">',i.requestSize,"</td>","<td></td>","<td></td>","<td>Pending...</td>","<td></td>"];t.push(s.join(""))}}t.push("</table>"),this._outputDiv.innerHTML=t.join("")}}});
//*******************
//LOGICAL-PATH:aria/jsunit/IRobot.js
//*******************
Aria.interfaceDefinition({$classpath:"aria.jsunit.IRobot",$interface:{KEYS:{$type:"Object"},isUsable:function(){},initRobot:{$type:"Function",$callbackParam:0},absoluteMouseMove:{$type:"Function",$callbackParam:1},mouseMove:{$type:"Function",$callbackParam:1},smoothMouseMove:{$type:"Function",$callbackParam:3},mousePress:{$type:"Function",$callbackParam:1},mouseRelease:{$type:"Function",$callbackParam:1},mouseWheel:{$type:"Function",$callbackParam:1},keyPress:{$type:"Function",$callbackParam:1},keyRelease:{$type:"Function",$callbackParam:1}}});
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageObject.js
//*******************
(function(){var t={$classpath:"aria.jsunit.JsCoverageObject",$singleton:!1,$statics:{sort:function(t,e){var i=t.filename.toLowerCase(),s=e.filename.toLowerCase();return i>s?1:i==s?0:-1}},$dependencies:[],$constructor:function(t){this.filename=t.filename||"",this.source=t.source||"",this.classname=t.classname||"",this.linesCount=t.linesCount||0,this.coveredLinesCount=t.coveredLinesCount||0,this._data=t.data,this._data&&this.init(this._data)},$prototype:{init:function(t){this.source=t.source;var e=0,i=0;for(var s in t)"source"!=s&&(e++,t[s]>0&&i++);this.linesCount=e,this.coveredLinesCount=i},toString:function(){return(this.classname||this.filename)+" : "+this.getCoverage()+"%"},getCoverage:function(){return Math.floor(100*(this.coveredLinesCount/this.linesCount))}}};Aria.classDefinition(t)})();
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageReport.js
//*******************
(function(){var t={$classpath:"aria.jsunit.JsCoverageReport",$singleton:!1,$dependencies:[],$constructor:function(t){this.jsCoverage=t.jsCoverage||{},this._reportContainer=null},$prototype:{getReport:function(t){var e=parseInt(this.jsCoverage.getCoverage(),10),i=this.jsCoverage.getLinesCount(),s=this.jsCoverage.getFilesCount(),a=this.jsCoverage.jsCoverageStore.getBaseReportsURL(),n="<a href='"+a+"jscoverage.html' target='_blank'>"+"Global Coverage"+"</a>",r=["<h2>JsCoverage report</h2><br>","<table style='border-collapse: collapse;font-size: small;'>","<tbody>"];return t?r.push("<tr><td width='350px'><strong>"+n+"</strong> (on "+s+" files and "+i+" lines)</td>","<td><strong>",e,"%<strong></td>",'<td width="100px"><table><tbody><tr>','<td bgcolor="lime" width="'+e+'px"/>','<td bgcolor="red" width="'+(100-e)+'px"/>',"</tr></tbody></table></td></tr><br>"):r.push("<tr>","<td><strong>"+n+"</strong> (on "+s+" files and "+i+" lines)</td>","<td><strong>",e,"%</td>",'<td style="float: right;margin-right: 5px;">','<div style="background-color: #E00000;border: 1px solid #000000;float: right;height: 10px;margin-top: 4px;overflow: hidden;width: 100px;">','<div style="background-color: #00F000;height: 10px;width: '+e+'px;"></div>',"</div>","</td>","</tr>"),r.push("</tbody>","</table>"),r.join("")},_createJsCoverageReport:function(){var t=Aria.$window.document,e=t.createElement("div");e.id="jsCoverageTableContainer",e.style.cssText=["background-color: white","border: 3px solid Grey","top: 100px","bottom: 100px","left: 295px","overflow-y: auto","padding: 0 10px 10px","position: absolute","width: 600px","z-index: 1"].join(";"),t.body.appendChild(e),this._reportContainer=e,this.refreshReport()},showReport:function(){this._reportContainer||this._createJsCoverageReport(),this._reportContainer.style.display="block"},refreshReport:function(){this._reportContainer||this._createJsCoverageReport();var t=this.getReport();this._reportContainer.innerHTML=t},hideReport:function(){this._reportContainer||this._createJsCoverageReport(),this._reportContainer.style.display="none"}}};Aria.classDefinition(t)})();
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageStore.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverageStore",$dependencies:["aria.utils.Date","aria.core.Browser"],$statics:{baseReportsURL:"http://aria/jscoverage-reports/",baseStoreURL:"http://aria/jscoverage-store/"},$constructor:function(){this.reportDate=aria.utils.Date.format(new Date,"yyyy'_'MM'_'dd'_'hh'_'mm'_'ss"),this._urlSuffix=aria.core.Browser.name.toLowerCase()+"/"+this.reportDate+"/"},$prototype:{store:function(t){this.storeReport(),t.callback&&t.callback.fn.call(t.callback.scope)},storeReport:function(){var t=this.getBaseStoreURL(),e=this.getJSONReport();this.sendJSONReport(e,t)},getBaseStoreURL:function(){return this.baseStoreURL+this._getURLSuffix()},getBaseReportsURL:function(){return this.baseReportsURL+this._getURLSuffix()},_getURLSuffix:function(){return this._urlSuffix},sendJSONReport:function(t,e){var i=function(){return Aria.$global.XMLHttpRequest?new Aria.$global.XMLHttpRequest:Aria.$global.ActiveXObject?new Aria.$global.ActiveXObject("Microsoft.XMLHTTP"):void 0},s=i();if(s.open("POST",e,!1),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Content-Length",""+t.length),s.send(t),200===s.status||201===s.status||204===s.status)return s.responseText;throw s.status},getJSONReport:function(){var t=function(t){return"0000".substr(t.length)+t},e=function(e){return'"'+e.replace(/[\u0000-\u001f"\\\u007f-\uffff]/g,function(e){switch(e){case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case'"':return'\\"';case"\\":return"\\\\";default:return"\\u"+t(e.charCodeAt(0).toString(16))}})+'"'},i=[],s=Aria.$global._$jscoverage;if(s)for(var a in s)if(s.hasOwnProperty(a)){for(var n=s[a],r=[],o=n.length,l=0;o>l;l++){var c=n[l];(void 0===c||null===c)&&(c="null"),r.push(c)}var h=n.source,u=[];o=h.length;for(var l=0;o>l;l++)u.push(e(h[l]));i.push(e(a)+(':{"coverage":['+r.join(",")+'],"source":['+u.join(",")+"]}"))}return i="{"+i.join(",")+"}"}}});
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverage.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverage",$singleton:!0,$dependencies:["aria.utils.Function","aria.jsunit.JsCoverageObject","aria.jsunit.JsCoverageReport","aria.jsunit.JsCoverageStore"],$constructor:function(){this.jsCoverageObjects=[],this.filters=[],this._reporter=new aria.jsunit.JsCoverageReport({jsCoverage:this}),this.jsCoverageStore=new aria.jsunit.JsCoverageStore},$destructor:function(){this._reporter.$dispose(),this.jsCoverageStore.$dispose();for(var t=0,e=this.jsCoverageObjects;e>t;t+=1)this.jsCoverageObjects[t].$dispose()},$prototype:{extractData:function(){var t=0,e=0,i=Aria.$global._$jscoverage;if(i){for(var s in i)if(i.hasOwnProperty(s)){var a=new aria.jsunit.JsCoverageObject({data:i[s],filename:s}),n=this.isCoverageObjectValid(a);n&&(t+=a.linesCount,e+=a.coveredLinesCount,this.jsCoverageObjects.push(a))}return this.linesCount=t,this.coveredLinesCount=e,this.jsCoverageObjects}},addFiltersFromString:function(t){for(var e=function(t,e){var i=e.filename.toLowerCase(),s=0!==n.indexOf("-");return-1!=i.indexOf(t)?s:!s},i=t.split(","),s=0,a=i.length;a>s;s++){var n=i[s],r=aria.utils.Function.bind(e,this,n);this.addFilter(r)}},addFiltersFromQueryString:function(){var t=aria.utils.QueryString,e=t.getKeyValue("filter");aria.utils.Type.isString(e)&&this.addFiltersFromString(e)},addFilter:function(t){this.filters.push(t)},reset:function(){this.filters=[],this.jsCoverageObjects=[]},isCoverageObjectValid:function(t){for(var e=!0,i=this.filters,s=0,a=i.length;a>s;s++){var n=i[s];n(t)||(e=!1)}return e},refresh:function(t){this.filters=[],this.jsCoverageObjects=[],this.addFiltersFromString(t),this.extractData(),this._reporter.refreshReport()},getReport:function(){return this._reporter.getReport.apply(this._reporter,arguments)},getReportForEmail:function(){return this._reporter.getReport(!0)},getFilesCount:function(){return this.jsCoverageObjects.length},getLinesCount:function(){return this.linesCount},getCoverage:function(){return Math.floor(100*(this.coveredLinesCount/this.linesCount))},store:function(t){this.jsCoverageStore.store(t)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/LayoutTester.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.LayoutTester",$singleton:!0,$statics:{excludeRegExp:/"^(script|noscript|style|option)$"/gi},$constructor:function(){this.elements=[]},$prototype:{captureJsonScreenshot:function(t){return this.elements=[],t||(t=Aria.$window.document.body),this._captureJsonScreenshot(t),this.elements},_captureJsonScreenshot:function(t){for(var e=this.excludeRegExp,i=t.childNodes,s=0,a=i.length;a>s;s++){var n=i[s];n.tagName&&!e.test(n.tagName)&&(this._isHumanVisible(n)&&this._saveElement(n,t),this._captureJsonScreenshot(n))}},compare:function(t,e){if(e=e||0,!t)return["Array to compare is null"];var i=[],s=this.elements;if(t.length!=s.length){i.push("The items number is not the same");for(var a=0,n=s.length;n>a;a++)if(!t[a]||!this.itemCompare(s[a],t[a],e)){i.push("Different from item "+a);break}return i}for(var a=0,n=s.length;n>a;a++)t[a]&&this.itemCompare(s[a],t[a],e)||i.push("Item "+a+" is different");return i},itemCompare:function(t,e,i){i=i||0;for(var s in t)if("element"!=s&&t[s]!==e[s]&&(isNaN(t[s])||Math.abs(t[s]-e[s])>i))return!1;return!0},_saveElement:function(t,e){var i=this._getCoordinates(t),s=this._getCoordinates(e||Aria.$window.document.body),a=this._getDirectTextContent(t);this.elements.push({element:t,id:t.id,tagName:t.tagName,top:i.top-s.top,left:i.left-s.left,width:i.width,height:i.height,text:a})},_isHumanVisible:function(t){if("img"==t.tagName.toLowerCase())return!0;if("none"==t.style.display||"hidden"==t.style.visibility)return!1;var e=this._getCoordinates(t);return 0===e.width&&0===e.height?!1:this._hasDirectChildText(t)?!0:this._hasStyleThatMakesItVisible(t)},_hasDirectChildText:function(t){return""!==this._getDirectTextContent(t)},_hasStyleThatMakesItVisible:function(t){var e=t.currentStyle||t.ownerDocument.defaultView.getComputedStyle(t,null);return""!==e.border||""!==e.borderWidth||""!==e.borderTopWidth||""!==e.borderLeftWidth||""!==e.borderBottomWidth||""!==e.borderRightWidth||""!==e.background&&"none"!==e.background||""!==e.backgroundImage&&"none"!==e.backgroundImage||""!==e.backgroundColor&&"transparent"!==e.backgroundColor},_getCoordinates:function(t){var e=t.getBoundingClientRect(),i={};return i.top=Math.round(e.top),i.left=Math.round(e.left),i.width=Math.round(e.width||t.offsetWidth),i.height=Math.round(e.height||t.offsetHeight),i},_getDirectTextContent:function(t){if("input"==t.tagName.toLowerCase()&&"text"==t.getAttribute("type"))return t.value;for(var e=t.childNodes,i="",s=0,a=e.length;a>s;s++){var n=e[s];if(3==n.nodeType){var r=n.textContent||n.innerText||n.nodeValue;r&&(r=r.replace(/(\r\n|[\r\n])/g,"").replace(RegExp(String.fromCharCode(160),"g")," ").replace(/^\s+|\s+$/g,""),""!==r&&(i+=r))}}return i}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestCase",$extends:"aria.jsunit.Assert",$dependencies:["aria.core.Sequencer","aria.utils.Json","aria.utils.Type","aria.utils.Object","aria.utils.Array"],$statics:{defaultTestTimeout:6e4,ERROR_NOTIFY_END:"Synchronous test is calling notifyTestEnd",EXCEPTION_IN_METHOD:"Exception raised while calling '%1' in an asynchronous test"},$constructor:function(){this.$Assert.constructor.call(this),this._sequencer=null,this._currentTaskId=-1,this.skipTest=!1,this._testsCount=0,this._testPassed=0,this.__appEnv={};var t=Aria.nspace(this.$classpath).classDefinition.$prototype,e=aria.utils.Object.keys(t),i=aria.utils.Type.isFunction;e=aria.utils.Array.filter(e,function(e){return i(t[e])&&!aria.utils.Array.contains(["setUp","tearDown"],e)}),this.__wrapTestMethods(e)},$destructor:function(){this._sequencer&&this._sequencer.$dispose(),this.$Assert.$destructor.call(this),this._currentTaskId=null},$prototype:{run:function(){this._saveAppEnvironment(),this._startTest(),this._sequencer=new aria.core.Sequencer;var t=aria.utils.Type.isFunction;if(!this.skipTest)for(var e in this)if(0===e.indexOf("test")&&t(this[e])){var i=0===e.indexOf("testAsync");this._sequencer.addTask({name:e,fn:this._execTestTask,scope:this,asynchronous:i}),this._testsCount++}this._sequencer.$on({end:this._onSequencerEnd,scope:this}),this._sequencer.start()},__wrapTestMethods:function(t){for(var e={},i=0,s=t.length;s>i;i+=1){var a=t[i];0!==a.indexOf("test")&&(e[a]=this[a],this[a]=function(t){return function(){var i=this._currentTestName;if(!i||0!==i.indexOf("testAsyn"))return e[t].apply(this,arguments);try{return e[t].apply(this,arguments)}catch(s){this.__failInTestMethod(s,t)}}}(a))}},__failInTestMethod:function(t,e){var i=this._currentTestName;0===i.indexOf("testAsyn")&&(this.$logError(this.EXCEPTION_IN_METHOD,e,t),this.notifyTestEnd(i.substring(0,i.length-2)))},waitFor:function(t){var e=t.delay||250,i=t.condition,s=function(){this.$callback(i)?this.$callback(t.callback):aria.core.Timer.addCallback({fn:s,scope:this,delay:e})};aria.core.Timer.addCallback({fn:s,scope:this,delay:e})},_execTestTask:function(t){var e,i=t.name;this._updateAssertInfo(i+"()");var s=!1;try{this._currentTaskId=t.id,this.setUp&&this.setUp(),t.asynchronous?this.setTestTimeout(this.defaultTestTimeout,i):e=this._disableTestEnd();try{this[i].call(this)}catch(a){a.name!=this.ASSERT_FAILURE&&this.raiseError(a),s=!0}}catch(n){this.raiseError(n,"Error location: setUp() method"),s=!0}(!t.asynchronous||s)&&(this._enableTestEnd(e),this.notifyTestEnd(i,s,t.asynchronous))},_disableTestEnd:function(){var t=this.notifyTestEnd;return this.notifyTestEnd=this._failOnNotify,t},_enableTestEnd:function(t){t&&(this.notifyTestEnd=t)},_failOnNotify:function(){this.$logError(this.ERROR_NOTIFY_END)},setTestTimeout:function(t,e){if(!this.demoMode){this._timeoutTimer&&aria.core.Timer.cancelCallback(this._timeoutTimer);var i=Error("Assert "+e+" has timed out");this._timeoutTimer=aria.core.Timer.addCallback({fn:this.handleAsyncTestError,scope:this,delay:t,args:i})}},notifyTestEnd:function(t,e,i){this._timeoutTimer&&(aria.core.Timer.cancelCallback(this._timeoutTimer),this._timeoutTimer=null),this.checkExpectedEventListEnd(),this.assertLogsEmpty(!1,!1),this.clearLogs();try{this.tearDown&&this.tearDown()}catch(s){this.raiseError(s,"Error location: tearDown() method")}this._restoreAppEnvironment();var a=Aria.__undisposedObjects;for(var n in a)a.hasOwnProperty(n)&&null==a[n]["aria:createdFromTest"]&&(a[n]["aria:createdFromTest"]=this.$classpath+"."+this._currentTestName);aria.core.Timer.callbacksRemaining(),i!==!1&&this._sequencer&&this._sequencer.notifyTaskEnd(this._currentTaskId)},callAsyncMethod:function(t,e,i,s){var a={cb:s,testName:this._currentTestName};null==t[e]&&this.raiseError(Error("Object "+t+"has no method called '"+e+"'")),aria.utils.Type.isFunction(t[e])||this.raiseError(Error("Method '"+e+"' in "+t+" is not a Function"));try{i.push({fn:"_callAsyncMethodCb",scope:this,args:a}),t[e].apply(t,i)}catch(n){this.handleAsyncTestError(n,!1),this.notifyTestEnd(this._currentTestName)}},_callAsyncMethodCb:function(t,e){try{this.$callback(e.cb,t)}catch(i){this.handleAsyncTestError(i,!1)}this.notifyTestEnd(e.testName)},_onSequencerEnd:function(){this._sequencer&&(this._sequencer.$dispose(),this._sequencer=null),this._testPassed++,this._endTest(),this._currentTaskId=-1},handleAsyncTestError:function(t,e){t.name!=this.ASSERT_FAILURE&&this.raiseError(t),e!==!1&&this.notifyTestEnd(this._currentTestName)},_saveAppEnvironment:function(){this.__appEnv=aria.utils.Json.copy(aria.core.AppEnvironment.applicationSettings)},_restoreAppEnvironment:function(){aria.core.AppEnvironment.setEnvironment(aria.utils.Json.copy(this.__appEnv))}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestMsgHandler.js
//*******************
(function(){var t=0;Aria.classDefinition({$classpath:"aria.jsunit.TestMsgHandler",$extends:"aria.core.IOFilter",$dependencies:["aria.jsunit.ConnectionSession"],$constructor:function(e){this.$IOFilter.constructor.call(this),this._metaData=this.CONNECTION_SESSION_METADATA+t,t++,this.cxLogs=[],e.cxLogs=this.cxLogs},$destructor:function(){this.cxLogs=null,this.$IOFilter.$destructor.call(this)},$statics:{CONNECTION_SESSION_METADATA:"aria.jsunit.TestMsgHandler:connectionSession"},$prototype:{onRequest:function(t){var e=t.sender;if(e&&"aria.modules.RequestMgr"==e.classpath){this.$assert(38,null==e[this._metaData]);var i=new aria.jsunit.ConnectionSession({ioRequest:t});e[this._metaData]=i,this.cxLogs.push(i)}},onResponse:function(t){var e=t.sender;if(e){var i=e[this._metaData];i&&i.setIOResponse()}}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/ModuleCtrlTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ModuleCtrlTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.TestMsgHandler","aria.modules.RequestMgr","aria.templates.ModuleCtrlFactory"],$constructor:function(){this.$TestCase.constructor.call(this),this.cxLogs=[],aria.core.IOFiltersMgr.addFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this})},$destructor:function(){aria.core.IOFiltersMgr.removeFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this}),this.cxLogs=null,this.evtLogs=null,this.$moduleCtrl&&(this.unregisterObject(this.$moduleCtrl),this.$moduleCtrl=null),this.$moduleCtrlPrivate&&(this.$moduleCtrlPrivate.$dispose(),this.$moduleCtrlPrivate=null),this.$TestCase.$destructor.call(this)},$statics:{FACTORY_ERROR:"Unable to create a module controller instance of %1"},$prototype:{run:function(){if(this.$controller){var t=aria.utils.Type.isString(this.$controller)?{classpath:this.$controller}:this.$controller;aria.templates.ModuleCtrlFactory.createModuleCtrl(t,{fn:this._goOnWithRun,scope:this,args:t},!1)}else this.$TestCase.run.call(this)},_goOnWithRun:function(t,e){t.error?this.$logError(this.FACTORY_ERROR,[e.classpath]):(this.$moduleCtrl=t.moduleCtrl,this.$moduleCtrlPrivate=t.moduleCtrlPrivate,this.registerObject(this.$moduleCtrl)),this.$TestCase.run.call(this)},clearLogs:function(){for(;this.cxLogs.length>0;)this.cxLogs.pop().$dispose();this.$TestCase.clearLogs.apply(this)},registerController:function(t){this.registerObject(t)},assertEvent:function(t,e){e=e||"Event "+t+" not fired",this.assertEventFired(t,e)},assertLogsClean:function(t){t=t||"assertLogsClean failed",this.assertFalse(this.__hasErrorInLogs(),t)},assertLogsNotClean:function(t){t=t||"assertLogsNotClean failed",this.assertTrue(this.__hasErrorInLogs(),t)},__hasErrorInLogs:function(){for(var t=0;this.evtLogs.length>t;t++)if("error"==this.evtLogs[t].name)return!0;for(var e=0;this.cxLogs.length>e;e++)if(null!=this.cxLogs[e].ioResponse.error)return!0;return!1}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TemplateTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TemplateTestCase",$extends:"aria.jsunit.TestCase",$events:{beforeLoadTplInIframe:""},$constructor:function(){this.$TestCase.constructor.call(this),this.env={template:this.$classpath+"Tpl",moduleCtrl:null,data:{},iframe:!1,cssText:"position:fixed;top:20px;left:20px;z-index:10000;width:1000px;height:700px;border:1px solid blue;background:aliceblue"},this.templateCtxt=null,this.testDivId="testArea_"+this.$class,this.testWindow=null,this.testDocument=null,this.testDiv=null,this.testIframe=null,this._started=!1,this.synEvent=aria.utils.SynEvents},$destructor:function(){this.__cleanEnv(!0),this.testDiv&&(this.testDiv.parentNode.removeChild(this.testDiv),this.testDiv=null),this.testIframe&&(this.testIframe.parentNode.removeChild(this.testIframe),this.testIframe=null),this.templateCtxt=null,this.testDocument=null,this.testWindow=null,this.$TestCase.$destructor.call(this)},$dependencies:["aria.utils.SynEvents","aria.templates.RefreshManager","aria.utils.Type"],$statics:{IFRAME_LOAD_TEMPLATE:"Error loading template '%1' in iframe",IFRAME_LOADER:"Unable to load Aria Templates in iframe"},$prototype:{needVisibleDocument:!0,setTestEnv:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.env[e]=t[e])},testAsyncStartTemplateTest:function(){this.env.iframe?this.loadTemplateInIframe(this.env,{fn:this._iframeSetUpComplete,scope:this},{fn:this._iframeSetUpFailed,scope:this}):this._loadTestTemplate({fn:this._startTests,scope:this})},_loadTestTemplate:function(t){if(this.testWindow=Aria.$window,this.testDocument=Aria.$window.document,!this.testDiv){var e=this.testDocument.createElement("div");e.id=this.testDivId,e.style.cssText=this.env.cssText,this.testDocument.body.appendChild(e),this.testDiv=e}this.testWindow.scroll(0,0),Aria.loadTemplate({classpath:this.env.template,div:this.testDiv,data:this.env.data,moduleCtrl:this.env.moduleCtrl,provideContext:!0},{fn:this._templateLoadCB,scope:this,args:{cb:t}})},_templateLoadCB:function(t,e){this.templateCtxt=t.tplCtxt;var i=e.cb;return t.success?(this.templateCtxt.isReady()?this.$callback(i):this.templateCtxt.$onOnce({Ready:{fn:function(t,e){this._started||e&&(e.delay=50,aria.core.Timer.addCallback({fn:function(t){this.$callback(t)},scope:this,args:e}))},scope:this,args:i}}),void 0):(this.$callback(i),void 0)},_iframeSetUpComplete:function(t){this.testDiv=t.div,this.testIframe=t.iframe,this.testWindow=t.iframe.contentWindow,this.testDocument=t.document,this.synEvent=this.testWindow.aria.utils.SynEvents,this._templateLoadCB({success:!0,tplCtxt:t.templateCtxt},{cb:{fn:this._startTests,scope:this}})},_iframeSetUpFailed:function(t){this.testDiv=t.div,t.iframe&&(this.testIframe=t.iframe,this.testWindow=t.iframe.contentWindow),this._startTests()},_startTests:function(){this._started=!0,this.runTemplateTest()},_disposeTestTemplate:function(){this.testWindow.Aria.disposeTemplate(this.testDiv),this.templateCtxt=null,this._started=!1},_replaceTestTemplate:function(t,e){aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate(),this.__cleanEnv(),this.setTestEnv(t),this._loadTestTemplate(e)},scope:this})},_refreshTestTemplate:function(){this.templateCtxt.$refresh()},runTemplateTest:function(){},nextTest:function(){var t=this._testsToExecute.shift();t?aria.core.Timer.addCallback({fn:function(){this._currentTestName=t,this[t]()},scope:this,delay:10}):this.notifyTemplateTestEnd()},notifyTemplateTestEnd:function(){this.demoMode||aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate();try{this.testDiv&&(this.testDiv.style.display="none"),this.testIframe&&(this.testIframe.style.display="none"),this.notifyTestEnd("testAsyncStartTemplateTest")}catch(t){this.handleAsyncTestError(t)}},scope:this,delay:50})},getElementById:function(t,e,i,s){var a=s||this.testWindow.aria.utils.Dom,n=i||this.templateCtxt,r=n.$getId(t),o=a.getElementById(r);if(e&&!o){var l=[];this.__retrieveDirectSubTemplates(n,l),n._mainSection._content;for(var c=0,h=l.length;h>c;c++)if(o=this.getElementById(t,!0,l[c],a))return o}return o},getElementsByClassName:function(t,e){if(t.getElementsByClassName)return t.getElementsByClassName(e);for(var i=t.getElementsByTagName("*"),s=[],a=RegExp("\\b"+e+"\\b"),n=0,r=i.length;r>n;n++){var o=i[n];a.test(o.className)&&s.push(o)}return s},__retrieveDirectSubTemplates:function(t,e){for(var i=t.$TemplateCtxt?t._mainSection:t,s=i._content,a=0,n=s.length;n>a;a++)s[a].behavior&&s[a].behavior.subTplCtxt?e.push(s[a].behavior.subTplCtxt):s[a]._content&&this.__retrieveDirectSubTemplates(s[a],e)},getInputField:function(t){var e=this.getWidgetInstance(t);return e.getTextInputField?e.getTextInputField():e.getDom()?e.getDom().getElementsByTagName("input")[0]:null},getWidgetDomElement:function(t,e){var i=this.getWidgetInstance(t),s=i.getDom().getElementsByTagName(e)[0];return s},getExpandButton:function(t){var e=this.getWidgetInstance(t);return e.getDom(),e._frame.getIcon?e._frame.getIcon("dropdown"):null},getMultiSelectIcon:function(t){return this.getExpandButton(t)},getWidgetDropDownPopup:function(t){var e=this.getWidgetInstance(t);return e._dropdownPopup?e._dropdownPopup.domElement:void 0},getSortIndicator:function(t){var e=this.getWidgetInstance(t);return e.getDom(),e?e._domElt:null},getWidgetInstance:function(t){var e=this.testWindow.aria.templates.RefreshManager;return this.getWidgetInstanceInRefreshMgr(e,t)},getWidgetInstanceInRefreshMgr:function(t,e){t.updateHierarchies();for(var i=t.getHierarchies(),s=0;i.length>s;s++){var a=this._findInHierarchy(i[s],e);if(a)return a}},getWidgetInstanceInIframe:function(t,e){return this.getWidgetInstanceInRefreshMgr(t.contentWindow.aria.templates.RefreshManager,e)},getLink:function(t){return this.getWidgetDomElement(t,"a")},_findInHierarchy:function(t,e,i){var s=!1;if("template"==t.type?(i=t.elem,s=!0):"templateWidget"==t.type&&(i=t.elem.behavior?t.elem.behavior.subTplCtxt:t.elem.subTplCtxt,s=!0),s){var a=i.getBehaviorById(e);if(a)return a}if(t.content)for(var n=0;t.content.length>n;n++){var r=t.content[n],a=this._findInHierarchy(r,e,i);if(null!=a)return a}return null},assertTrue:function(t,e){try{this.$TestCase.assertTrue.apply(this,[t,e])}catch(i){this.handleAsyncTestError(i,!1)}},end:function(){this.notifyTemplateTestEnd()},clickAndType:function(t,e,i,s){this.synEvent.click(this.getInputField(t),{fn:this.__afterClick,scope:this,args:[t,e,i,s]})},__afterClick:function(){var t=arguments[1][0],e=arguments[1][1],i=arguments[1][2],s=arguments[1][3];this.synEvent.type(this.getInputField(t),e,{fn:this.__afterType,scope:this,args:[t,e,i,s]})},__afterType:function(){var t=arguments[1][0],e=(arguments[1][1],arguments[1][2]),i=arguments[1][3];if(i===!1)this.$callback(e);else{var s=this.getInputField(t);s.blur(),this.synEvent.click(this.testDocument.body,e)}},__cleanEnv:function(t){var e=this.testWindow.Aria.getClassRef(this.env.template),i=this.testWindow.aria.core.ClassMgr;e&&e.classDefinition.$hasScript&&i.unloadClass(this.env.template+"Script"),i.unloadClass(this.env.template),t&&this.env.moduleCtrl&&this.env.moduleCtrl.classpath&&i.unloadClass(this.env.moduleCtrl.classpath)},computeZIndex:function(t){for(var e=this.testDocument.body;t&&t!=e;){var i=t.style?t.style:null,s=i&&i.zIndex?i.zIndex:null;if(s){var a=parseInt(s,10);return a}t=t.parentNode}return null},loadTemplateInIframe:function(t,e,i){var s={def:t,cb:e,err:i||{fn:this.end,scope:this}};Aria.load({classes:["aria.utils.FrameATLoader"],template:[t.template],oncomplete:{fn:this._iframeDepLoad,args:s,scope:this},onerror:s.err})},_iframeDepLoad:function(t){var e=Aria.$window.document,i=e.createElement("iframe");i.id="testIframe_"+this.$class,i.style.cssText=t.def.cssText,e.body.appendChild(i),t.iframe=i,aria.utils.FrameATLoader.loadAriaTemplatesInFrame(i,{fn:this._iframeInnerDepLoad,scope:this,args:t})},_iframeInnerDepLoad:function(t,e){if(!t.success)return this._iframeLoadError(e);for(var i=e.iframe.contentWindow,s=aria.core.Log.getAppenders(),a=0,n=s.length;n>a;a+=1)i.aria.core.Log.addAppender(s[a]);i.Aria.load({classes:["aria.jsunit.TemplateTestCase"],oncomplete:{fn:this._iframeLoad,scope:this,args:e},onerror:{fn:this._iframeLoadError,scope:this,args:e}})},_iframeLoad:function(t){var e=t.iframe.contentWindow,i=t.iframe.contentDocument||e.document,s=i.createElement("div");i.body.appendChild(s),t.div=s;var a=t.def;this.$raiseEvent({name:"beforeLoadTplInIframe",window:e,document:i}),e.Aria.loadTemplate({classpath:a.template,div:s,data:a.data,moduleCtrl:a.moduleCtrl,provideContext:!0},{fn:this._iframeDone,scope:this,args:t})},_iframeLoadError:function(t){return this.$logError(this.IFRAME_LOADER),this.$callback(t.err,t)},_iframeDone:function(t,e){return t.success?(this.$callback(e.cb,{iframe:e.iframe,div:e.div,document:e.iframe.contentDocument||e.iframe.contentWindow.document,templateCtxt:t.tplCtxt}),void 0):(this.$logError(this.IFRAME_LOAD_TEMPLATE,e.def.template),this.$callback(e.err,e))}}});
//*******************
//LOGICAL-PATH:aria/jsunit/MultiSelectTemplateTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.MultiSelectTemplateTestCase",$extends:"aria.jsunit.TemplateTestCase",$constructor:function(){this.$TemplateTestCase.constructor.call(this)},$prototype:{_MSClick:function(t,e,i){i.synEvent.click(t,{fn:e,scope:i})},_MSType:function(t,e,i,s){s.synEvent.type(t,e,{fn:i,scope:s})},getCheckBox:function(t,e){var i=this.getWidgetInstance(t),s=i.controller.getListWidget();return s._tplWidget?s._tplWidget.subTplCtxt._mainSection._content[1]._content[0].section._content[e].behavior:null},toggleMultiSelectOption:function(t,e,i){var s=this.getCheckBox(t,e).getDom();s&&this.synEvent.click(s,{fn:i,scope:this})},isMultiSelectOpen:function(t){var e=this.getWidgetInstance(t).controller.getListWidget();return!!(e&&e._tplWidget&&e._tplWidget.subTplCtxt)},toggleMultiSelectOn:function(t,e){var i=this.getMultiSelectIcon(t);this.synEvent.click(i,{fn:this.__waitMSOpenByClick,scope:this,args:[t,e]})},toggleMultiSelectOff:function(t,e){var i=this.getMultiSelectIcon(t);this.synEvent.click(i,{fn:e,scope:this})},waitUntilMsOpened:function(t,e){this.__waitUntilMsState(t,e,!0)},waitUntilMsClosed:function(t,e){this.__waitUntilMsState(t,e,!1)},__waitUntilMsState:function(t,e,i){this.waitFor({condition:function(){var e=this.isMultiSelectOpen(t);return i?e:!e},callback:{fn:e,scope:this}})},__waitMSOpenByClick:function(t,e){var i=e[0],s=e[1];this.waitUntilMsOpened(i,s)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestEngine.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestEngine",$dependencies:["aria.utils.Type"],$events:{change:""},$constructor:function(){this.testReport=null,this._testStack=[],this._currentTest=null,this._isFinished=!1,this.runIsolated=!1},$destructor:function(){this.testReport=null},$prototype:{runTest:function(t,e){this.skipTests=e,this._registerAsListener(t),t.run()},_onFailure:function(t){null==this._currentTest.failures&&(this._currentTest.failures=[]),this._currentTest.failures.push({testState:t.testState,description:t.description});for(var e=this._testStack.length,i=0;e>i;i++)this._testStack[i].totalNbrOfFailures++;this._raiseChange("failure")},_onError:function(t){null==this._currentTest.errors&&(this._currentTest.errors=[]),this._currentTest.errors.push({testState:t.testState,description:t.msg,exception:t.exception});for(var e=this._testStack.length,i=0;e>i;i++)this._testStack[i].totalNbrOfErrors++;this._raiseChange("error")},_onTestLoad:function(t){var e=t.testObject,i=e.$classpath;null!=this.skipTests&&aria.utils.Array.contains(this.skipTests,e.$classpath)&&(e.skipTest=!0);do{var s=Aria.nspace(i).classDefinition;if(!s)break;aria.utils.Array.contains(this.skipTests,s.$extends)&&(e.skipTest=!0),i=s.$extends}while(i);this._registerAsListener(e)},_onTestStart:function(t){var e={testClass:t.testObject.$classpath,instance:t.testObject,totalNbrOfFailures:t.testObject._failedOnCreate?1:0,totalNbrOfErrors:0,totalNbrOfAsserts:0,state:"processing",processingState:"",subTests:null,failures:null,errors:null,retryURL:this._getRetryTestUrl(t.testObject.$classpath)},i=this._testStack.length;if(0===i)this._testStack.push(e),this.testReport=e;else{var s=this._testStack[i-1];null==s.subTests&&(s.subTests=[]),s.subTests.push(e),this._testStack.push(e)}this._currentTest=e,this._raiseChange("testStart")},_onTestEnd:function(t){t.testObject.$unregisterListeners(this),this._currentTest.processingState="",this._currentTest.state=t.testObject.skipTest?"skipped":"done",t.nbrOfAsserts&&(this._currentTest.totalNbrOfAsserts+=t.nbrOfAsserts),this._testStack.pop();var e=this._testStack.length;e>0?this._currentTest=this._testStack[e-1]:(this._currentTest=null,this._isFinished=!0),this._raiseChange("testEnd")},isFinished:function(){return this._isFinished===!0},_onStateChange:function(t){this._currentTest.processingState=t.testState,this._raiseChange("testProcessingState")},_registerAsListener:function(t){this.runIsolated&&aria.utils.Type.isInstanceOf(t,"aria.jsunit.TestSuite")&&(t.runIsolated=!0),t.$on({failure:this._onFailure,error:this._onError,start:this._onTestStart,end:this._onTestEnd,stateChange:this._onStateChange,testLoad:this._onTestLoad,scope:this})},_raiseChange:function(t){this.$raiseEvent({name:"change",testReport:this.testReport,changeType:t})},_getRetryTestUrl:function(t){var e=aria.utils.QueryString;e.getKeyValue("testClasspath");var i=e.keyValues;i.testClasspath=t;var s=[];for(var a in i)i.hasOwnProperty(a)&&"store"!=a&&s.push([a,i[a]].join("="));var n="?"+s.join("&"),r=Aria.$frameworkWindow,o=r.location.href.replace(/#$/,"");return o=o.replace(r.location.search,""),o+=n},getCurrentTest:function(){return this._currentTest},pause:function(t){var e,i=this._currentTest.instance;e=i.$TestSuite?i:this._testStack[this._testStack.length-2].instance,e&&e.$TestSuite?e.pause(t):(this.$logError("Pause couldn't find a test suite to pause"),this.$callback(t))},resume:function(t){var e=this._currentTest.instance;e.resume(t)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestReport",$singleton:!1,$dependencies:[],$constructor:function(t){this.testRunner=t.testRunner},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){for(var t=this.testRunner.getErrors(),e=(new Date).toLocaleString(),i=["Aria templates test campaign completed<br>",e,"<br>","<h2>Error report</h2>",this.getErrorSummary(),"<ul>"].join("<br>"),s=0,a=t.length;a>s;s++){var n=t[s],r=this.getErrorReport(n);i+=r}return i+="</ul><br>"},getErrorSummary:function(){var t=this.testRunner.getErrors(),e="";return e=0===t.length?'<b><font color="green">No test failed !</font></b>':1===t.length?"<b>1 test failed :</b>":"<b>"+t.length+" tests failed :</b>"},getErrorReport:function(t){for(var e=t.messages,i='<li><a href="'+t.retryURL+'">'+t.testClass+"</a>"+"</li>"+"<li> Error"+(e.length>1?"s":"")+" : "+"<ul>",s=0,a=e.length;a>s;s++){var n=e[s];i+="<li>"+n+"</li>"}return i+="</ul></li><br>"},getMailHeader:function(){var t='<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>Aria Templates Tests</title><style>*{font-family: Tahoma,Arial,sans-serif;font-size:10pt;}h1{font-size:14pt;} h2{font-size:22pt;margin-bottom:0px;font-weight:lighter} ul{line-height:1.5em;list-style-type:none;margin:0.3em 0 0 1.5em;padding:0;}</style></head><body>';return t},getMailFooter:function(){return'<br><img src="http://ariatemplates.com/images/logo-page.png"/><br><b>Aria team</b></body></html>'}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestWrapper.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestWrapper",$extends:"aria.jsunit.Assert",$dependencies:["aria.utils.FrameATLoader"],$constructor:function(t){this.$Assert.constructor.call(this),this.$classpath=t},$destructor:function(){this._removeFrame(),this.$Assert.$destructor.call(this)},$prototype:{run:function(){this._startTest();var t=Aria.$window.document;this._frame=t.createElement("iframe"),this._frame.style.cssText="z-index:100000;position:absolute;left:0px;top:0px;width:1024px;height:768px;border:1px solid black;visibility:hidden;display:block;background-color:white;",t.body.appendChild(this._frame),this._subWindow=this._frame.contentWindow,aria.utils.FrameATLoader.loadAriaTemplatesInFrame(this._frame,{fn:this._atLoadedInFrame,scope:this})},_atLoadedInFrame:function(t){if(!t.success)return this.raiseFailure("An error occurred while loading the framework in the iframe."),this._end(),void 0;var e=this._subWindow,i=e.Aria,s=e.document,a=s.createElement("div");a.setAttribute("id","TESTAREA"),s.body.appendChild(a);var n=Aria.getClassRef(this.$classpath);n.prototype.needVisibleDocument&&(this._frame.style.visibility="visible"),i.load({classes:[this.$classpath],oncomplete:{fn:this._loadTestComplete,scope:this},onerror:{fn:this._loadTestError,scope:this}})},_loadTestError:function(){this.raiseFailure("An error occurred while loading the test class."),this._end()},_loadTestComplete:function(){var t=this._subWindow.Aria;this._subWindow.aria,this._testInstance=t.getClassInstance(this.$classpath),this._testInstance.$on({"*":this._testEvent,scope:this}),this.demoMode&&(this._testInstance.demoMode=!0),this._testInstance.run()},handleAsyncTestError:function(){this.raiseFailure("Test was interrupted."),this._end()},_testEvent:function(t){"error"==t.name?this.raiseError(t.exception,t.msg):"failure"==t.name?this.raiseFailure(t.description):"stateChange"==t.name?this._updateAssertInfo(t.testState):"start"==t.name||"end"==t.name&&(this._totalAssertCount=t.nbrOfAsserts,this._testsCount=this._testInstance._testsCount,aria.core.Timer.addCallback({fn:this._end,scope:this,delay:100}))},_removeFrame:function(){if(this._frame){if(this._subWindow.Aria&&this._subWindow.Aria.eval){var t=this._subWindow.Aria.eval("(function () { try { if (this._testInstance) {this._testInstance.$dispose();} return Aria.dispose(); } catch (e) { return { error: e }; }}).call(arguments[2])",null,this);if(this._testInstance=null,t)if(t.error)this.raiseError(t.error,"An exception occurred while disposing the test or the framework.");else if(0!==t.nbNotDisposed){var e=t.notDisposed,i=["There were ",t.nbNotDisposed," undisposed objects ("],s=!0;for(var a in e)e.hasOwnProperty(a)&&(s?s=!1:i.push(", "),i.push(e[a].$classpath));i.push(")"),this.raiseFailure(i.join(""))}}var n=Aria.$window.document.body;n.removeChild(this._frame),this._subWindow=null,this._frame=null}},_end:function(){this._removeFrame(),this._endTest()}}});
//*******************
//LOGICAL-PATH:aria/jsunit/NewTestRunner.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.NewTestRunner",$events:{preloadBegin:"",preloadEnd:"",campaignBegin:"",campaignEnd:"",campaignChange:""},$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.core.Log","aria.jsunit.TestWrapper"],$constructor:function(){this._testEngine=null,this._reporter=new aria.jsunit.TestReport({testRunner:this}),this.__overrideGetURLWithTimestamp(),this._rootClasspath="",this.runIsolated=!1},$destructor:function(){this._testEngine&&this._testEngine.$dispose(),this._reporter&&this._reporter.$dispose(),this._outputDiv=null},$prototype:{getReporter:function(){return this._reporter},preload:function(){this.$raiseEvent("preloadBegin");var t=Aria.getClassRef(this._rootClasspath);t.prototype.$TestSuite?(this._rootTest=new t,this._rootTest.$on({preloadEnd:{fn:this._onPreloadEnd,scope:this}}),this._rootTest.preload()):(this._rootTest=this.runIsolated?new aria.jsunit.TestWrapper(this._rootClasspath):new t,this.$raiseEvent("preloadEnd"))},_onPreloadEnd:function(){this.$raiseEvent("preloadEnd")},setRootClasspath:function(t){this._rootClasspath=t},run:function(t,e){this.__overrideLogError(),this.$raiseEvent("campaignBegin");var i=this.getEngine();i.runTest(this._rootTest,e)},__overrideLogError:function(){var t=aria.core.JsObject.prototype.$logError;aria.core.JsObject.prototype.$logError=function(e,i,s){var a=aria.core.Log.prepareLoggedMessage(e,i),n=s?". Error : "+s.message:"";return Aria.__runtimeErrors||(Aria.__runtimeErrors=[]),Aria.__runtimeErrors.push(a+n),t.apply(this,arguments)}},__overrideGetURLWithTimestamp:function(){var t=aria.core.DownloadMgr.getURLWithTimestamp;aria.core.DownloadMgr.getURLWithTimestamp=function(e){return t.apply(aria.core.DownloadMgr,[e,!0])}},_onChange:function(t){var e=t.changeType;("testStart"==e||"testEnd"==e)&&(this.$raiseEvent("campaignChange"),this._testEngine.isFinished()&&this.$raiseEvent("campaignEnd"))},getRootTest:function(){return this._rootTest},_getTestCases:function(t){var e=[];if(!t.$TestSuite)return[{classpath:t.$classpath,instance:t}];if(t.isSkipped()||-1===t.isSelected())return[];for(var i=t.getSubTests(),s=0,a=i.length;a>s;s++){var n=i[s];if(-1!=n.classpath.indexOf("TestSuite")){var r=this._getTestCases(n.instance);e=e.concat(r)}else e.push(n)}return e},getTestCases:function(){return this._getTestCases(this._rootTest)},getTestsCount:function(){var t=this._rootTest;return this._getTestCases(t).length},getFinishedTests:function(){for(var t=this.getTestCases(),e=[],i=0,s=t.length;s>i;i++){var a=t[i];a.instance&&a.instance._isFinished&&e.push(a)}return e},getFinishedTestsCount:function(){return this.getFinishedTests().length},getFailedTests:function(){for(var t=this.getTestCases(),e=[],i=0,s=t.length;s>i;i++){var a=t[i];a.instance&&a.instance.hasError()&&e.push(a)}return e},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){var t=this._testEngine;return t.testReport},getEngine:function(){return null==this._testEngine&&(this._testEngine=new aria.jsunit.TestEngine,this._testEngine.runIsolated=this.runIsolated,this._testEngine.$on({change:this._onChange,scope:this})),this._testEngine}}});
//*******************
//LOGICAL-PATH:aria/jsunit/Robot.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.Robot",$singleton:!0,$statics:{ROBOT_UNAVAILABLE:"There is no usable implementation of the robot.",BUTTON1_MASK:16,BUTTON2_MASK:8,BUTTON3_MASK:4},$constructor:function(){this.robot=null},$prototype:{getRobotClasspath:function(){if(Aria.$frameworkWindow.top.phantomJSRobot)return"aria.jsunit.RobotPhantomJS";var t=Aria.$window.navigator;try{var e=t&&t.javaEnabled();if(e)return"aria.jsunit.RobotJavaApplet"}catch(i){return null}},isUsable:function(){return!!this.getRobotClasspath()},initRobot:function(t){if(this.robot)this.robot.initRobot(t);else{var e=this.getRobotClasspath();if(!e)return this.$logError(this.ROBOT_UNAVAILABLE),void 0;Aria.load({classes:[e],oncomplete:{fn:this._robotLoaded,scope:this,args:{robotClasspath:e,cb:t}}})}},_robotLoaded:function(t){this.robot||(this.robot=Aria.getClassRef(t.robotClasspath).$interface("aria.jsunit.IRobot")),this.robot.initRobot(t.cb)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotJavaApplet.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotJavaApplet",$dependencies:["aria.utils.Dom","aria.utils.AriaWindow","aria.utils.StringCallback"],$implements:["aria.jsunit.IRobot"],$singleton:!0,$constructor:function(){this._robotInitialized=!1,this._initStringCb=null,aria.utils.AriaWindow.$on({unloadWindow:this._reset,scope:this})},$destructor:function(){this._reset(),aria.utils.AriaWindow.$unregisterListeners(this)},$events:{appletInitialized:""},$statics:{KEYS:{VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_A:65,VK_ACCEPT:30,VK_ADD:107,VK_AGAIN:65481,VK_ALL_CANDIDATES:256,VK_ALPHANUMERIC:240,VK_ALT:18,VK_ALT_GRAPH:65406,VK_AMPERSAND:150,VK_ASTERISK:151,VK_AT:512,VK_B:66,VK_BACK_QUOTE:192,VK_BACK_SLASH:92,VK_BACK_SPACE:8,VK_BEGIN:65368,VK_BRACELEFT:161,VK_BRACERIGHT:162,VK_C:67,VK_CANCEL:3,VK_CAPS_LOCK:20,VK_CIRCUMFLEX:514,VK_CLEAR:12,VK_CLOSE_BRACKET:93,VK_CODE_INPUT:258,VK_COLON:513,VK_COMMA:44,VK_COMPOSE:65312,VK_CONTEXT_MENU:525,VK_CONTROL:17,VK_CONVERT:28,VK_COPY:65485,VK_CUT:65489,VK_D:68,VK_DEAD_ABOVEDOT:134,VK_DEAD_ABOVERING:136,VK_DEAD_ACUTE:129,VK_DEAD_BREVE:133,VK_DEAD_CARON:138,VK_DEAD_CEDILLA:139,VK_DEAD_CIRCUMFLEX:130,VK_DEAD_DIAERESIS:135,VK_DEAD_DOUBLEACUTE:137,VK_DEAD_GRAVE:128,VK_DEAD_IOTA:141,VK_DEAD_MACRON:132,VK_DEAD_OGONEK:140,VK_DEAD_SEMIVOICED_SOUND:143,VK_DEAD_TILDE:131,VK_DEAD_VOICED_SOUND:142,VK_DECIMAL:110,VK_DELETE:127,VK_DIVIDE:111,VK_DOLLAR:515,VK_DOWN:40,VK_E:69,VK_END:35,VK_ENTER:10,VK_EQUALS:61,VK_ESCAPE:27,VK_EURO_SIGN:516,VK_EXCLAMATION_MARK:517,VK_F:70,VK_F1:112,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:61440,VK_F14:61441,VK_F15:61442,VK_F16:61443,VK_F17:61444,VK_F18:61445,VK_F19:61446,VK_F2:113,VK_F20:61447,VK_F21:61448,VK_F22:61449,VK_F23:61450,VK_F24:61451,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_FINAL:24,VK_FIND:65488,VK_FULL_WIDTH:243,VK_G:71,VK_GREATER:160,VK_H:72,VK_HALF_WIDTH:244,VK_HELP:156,VK_HIRAGANA:242,VK_HOME:36,VK_I:73,VK_INPUT_METHOD_ON_OFF:263,VK_INSERT:155,VK_INVERTED_EXCLAMATION_MARK:518,VK_J:74,VK_JAPANESE_HIRAGANA:260,VK_JAPANESE_KATAKANA:259,VK_JAPANESE_ROMAN:261,VK_K:75,VK_KANA:21,VK_KANA_LOCK:262,VK_KANJI:25,VK_KATAKANA:241,VK_KP_DOWN:225,VK_KP_LEFT:226,VK_KP_RIGHT:227,VK_KP_UP:224,VK_L:76,VK_LEFT:37,VK_LEFT_PARENTHESIS:519,VK_LESS:153,VK_M:77,VK_META:157,VK_MINUS:45,VK_MODECHANGE:31,VK_MULTIPLY:106,VK_N:78,VK_NONCONVERT:29,VK_NUM_LOCK:144,VK_NUMBER_SIGN:520,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_O:79,VK_OPEN_BRACKET:91,VK_P:80,VK_PAGE_DOWN:34,VK_PAGE_UP:33,VK_PASTE:65487,VK_PAUSE:19,VK_PERIOD:46,VK_PLUS:521,VK_PREVIOUS_CANDIDATE:257,VK_PRINTSCREEN:154,VK_PROPS:65482,VK_Q:81,VK_QUOTE:222,VK_QUOTEDBL:152,VK_R:82,VK_RIGHT:39,VK_RIGHT_PARENTHESIS:522,VK_ROMAN_CHARACTERS:245,VK_S:83,VK_SCROLL_LOCK:145,VK_SEMICOLON:59,VK_SEPARATOR:108,VK_SHIFT:16,VK_SLASH:47,VK_SPACE:32,VK_STOP:65480,VK_SUBTRACT:109,VK_T:84,VK_TAB:9,VK_U:85,VK_UNDEFINED:0,VK_UNDERSCORE:523,VK_UNDO:65483,VK_UP:38,VK_V:86,VK_W:87,VK_WINDOWS:524,VK_X:88,VK_Y:89,VK_Z:90}},$prototype:{isUsable:function(){var t=Aria.$window.navigator;try{var e=t&&t.javaEnabled();return!!e}catch(i){return!1}},initRobot:function(t){if(null==this.applet){var e=Aria.$window.document,i=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jnlp"),s=e.createElement("applet"),a=e.createElement("param");a.setAttribute("name","jnlp_href"),a.setAttribute("value",i),s.appendChild(a);var n=e.createElement("param");n.setAttribute("name","initCallback"),this._initStringCb||(this._initStringCb=aria.utils.StringCallback.createStringCallback({scope:this,fn:this._callCallback,args:this._raiseInitEvent,resIndex:-1})),n.setAttribute("value",this._initStringCb),s.appendChild(n),s.setAttribute("width","1"),s.setAttribute("height","1");var r=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jar",!0);s.setAttribute("archive",r),s.setAttribute("code","com.amadeus.ui.aria.robotapplet.RobotApplet"),s.style.cssText="position:absolute;display:block;left:0px;top:0px;width:1px;height:1px;z-index:-1;",e.body.appendChild(s),this.applet=s,aria.utils.AriaWindow.attachWindow()}t&&(this._robotInitialized?this.$callback(t):this.$onOnce({appletInitialized:t}))},_raiseInitEvent:function(){this._robotInitialized=!0,this._initStringCb=null,this.$raiseEvent("appletInitialized")},_reset:function(){var t=this.applet;if(null!=t){var e=Aria.$window;e.document.body.removeChild(t),this._robotInitialized?this._robotInitialized=!1:this.$unregisterListeners(),this.applet=null,aria.utils.AriaWindow.detachWindow()}},_updateAppletPosition:function(t){var e=this.applet;e.ownerDocument;var i=aria.utils.Dom._getDocumentScroll();e.style.left=i.scrollLeft+"px",e.style.top=i.scrollTop+"px",this._callCallback(t)},absoluteMouseMove:function(t,e){this.applet.absoluteMouseMove(t.x,t.y),this._callCallback(e)},mouseMove:function(t,e){var i=aria.utils.Dom._getViewportSize();(0>t.x||0>t.y||t.x>i.width||t.y>i.height)&&this.$logWarn("MouseMove position outside of the viewport."),this._updateAppletPosition({fn:this._mouseMoveCb,args:{position:t,cb:e}})},_mouseMoveCb:function(t,e){var i=e.position;this.applet.mouseMove(i.x,i.y),this._callCallback(e.cb)},smoothMouseMove:function(t,e,i,s){var a=aria.utils.Dom._getViewportSize();(0>t.x||0>t.y||t.x>a.width||t.y>a.height||0>e.x||0>e.y||e.x>a.width||e.y>a.height)&&this.$logWarn("smoothMouseMove from or to position outside of the viewport."),this._updateAppletPosition({fn:this._smoothMouseMoveCb,args:{from:t,to:e,duration:i,cb:s}})},_smoothMouseMoveCb:function(t,e){var i=e.from,s=e.to;this.applet.smoothMouseMove(i.x,i.y,s.x,s.y,e.duration,aria.utils.StringCallback.createStringCallback({fn:this._callCallback,scope:this,args:e.cb,resIndex:-1}))},mousePress:function(t,e){this.applet.mousePress(t),this._callCallback(e)},mouseRelease:function(t,e){this.applet.mouseRelease(t),this._callCallback(e)},mouseWheel:function(t,e){this.applet.mouseWheel(t),this._callCallback(e)},keyPress:function(t,e){this.applet.keyPress(t),this._callCallback(e)},keyRelease:function(t,e){this.applet.keyRelease(t),this._callCallback(e)},screenCapture:function(t,e,i){var s=aria.utils.Dom._getViewportSize();return 0>t.x||0>t.y||0>t.width||0>t.height||t.x+t.width>s.width||t.y+t.height>s.height?(this.$logError("Screen capture area outside of the viewport."),void 0):(this._updateAppletPosition({fn:this._screenCaptureCb,args:{geometry:t,imageName:e,cb:i}}),void 0)},_screenCaptureCb:function(t,e){var i=e.geometry;this.applet.screenCapture(i.x,i.y,i.width,i.height,e.imageName),this.$callback(e.cb)},compareImages:function(t,e){return this.applet.compareImages(t,e)},loadImage:function(t,e){this.applet.loadImage(t,e)},saveImage:function(t,e){this.applet.saveImage(t,e)},_callCallback:function(t){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:t,delay:50})},getWin32Api:function(){return this.applet.getWin32Api()}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotPhantomJS.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotPhantomJS",$implements:["aria.jsunit.IRobot"],$singleton:!0,$constructor:function(){this.offsetX=0,this.offsetY=32;var t;if(Aria.$frameworkWindow&&(this._robot=t=Aria.$frameworkWindow.top.phantomJSRobot),t){this._sendEvent=this._robot.sendEvent,this._keyShift=!1,this._lastMousePosition={x:0,y:0};var e=this.KEYS,i=t.keys;for(var s in i)if(i.hasOwnProperty(s)){var a="VK_"+s.toUpperCase();e[a]||(e[a]=i[s])}}},$statics:{MOUSEWHEEL_NOT_IMPLEMENTED:"mouseWheel is not implemented",BUTTONS:{16:"left",8:"middle",4:"right"},KEYS:{VK_TAB:"	",VK_SPACE:" ",VK_BACK_SPACE:"\b",VK_ENTER:"\r",VK_MULTIPLY:"*",VK_PLUS:"+",VK_MINUS:"-",VK_PERIOD:".",VK_SLASH:"/",VK_SEMICOLON:";",VK_COLON:":",VK_EQUALS:"=",VK_COMMA:",",VK_BACK_QUOTE:"`",VK_BACK_SLASH:"\\",VK_QUOTE:"'",VK_QUOTEDBL:'"',VK_LEFT_PARENTHESIS:"(",VK_RIGHT_PARENTHESIS:")"}},$prototype:{$init:function(t){for(var e=t.KEYS,i="Z".charCodeAt(0),s="A".charCodeAt(0);i>=s;s++){var a=String.fromCharCode(s);e["VK_"+a.toUpperCase()]=a.toLowerCase()}for(var n=0;10>n;n++)e["VK_"+n]=""+n},isUsable:function(){return!!this._robot},initRobot:function(t){this.isUsable()&&this.$callback(t)},_translateCoordinates:function(t){return{x:t.x+this.offsetX,y:t.y+this.offsetY}},mouseMove:function(t,e){var i=this._translateCoordinates(t);this.absoluteMouseMove(i,e)},absoluteMouseMove:function(t,e){var i=this._lastMousePosition;i.x=t.x,i.y=t.y,this._sendEvent("mousemove",t.x,t.y),this._callCallback(e)},smoothMouseMove:function(t,e,i,s){var a=this._translateCoordinates(t),n=this._translateCoordinates(e);this.smoothAbsoluteMouseMove(a,n,i,s)},smoothAbsoluteMouseMove:function(t,e,i,s){this.absoluteMouseMove(t,{fn:this._stepSmoothAbsoluteMouseMove,scope:this,resIndex:-1,args:{from:t,to:e,duration:i,cb:s,endTime:(new Date).getTime()+i}})},_stepSmoothAbsoluteMouseMove:function(t){var e=(t.endTime-(new Date).getTime())/t.duration,i=t.to;if(0>e)return this.absoluteMouseMove(i,t.cb),void 0;var s=t.from;this.absoluteMouseMove({x:e*s.x+(1-e)*i.x,y:e*s.y+(1-e)*i.y},{fn:this._stepSmoothAbsoluteMouseMove,scope:this,resIndex:-1,args:t})},mousePress:function(t,e){var i=this._lastMousePosition;this._sendEvent("mousedown",i.x,i.y,this.BUTTONS[t]),this._callCallback(e)},mouseRelease:function(t,e){var i=this._lastMousePosition;this._sendEvent("mouseup",i.x,i.y,this.BUTTONS[t]),this._callCallback(e)},mouseWheel:function(){this.$logError(this.MOUSEWHEEL_NOT_IMPLEMENTED)},keyPress:function(t,e){t==this.KEYS.VK_SHIFT&&(this._keyShift=!0),"string"==typeof t&&this._keyShift&&(t=t.toUpperCase()),this._sendEvent("keydown",t),this._callCallback(e)},keyRelease:function(t,e){"string"==typeof t&&this._keyShift&&(t=t.toUpperCase()),t==this.KEYS.VK_SHIFT&&(this._keyShift=!1),this._sendEvent("keyup",t),this._callCallback(e)},_callCallback:function(t){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:t,delay:200})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SynEvents.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SynEvents",$singleton:!0,$dependencies:["aria.jsunit.Robot"],$constructor:function(){this._robot=aria.jsunit.Robot},$destructor:function(){this._robot=null},$prototype:{_keys:{CTRL:"CONTROL","	":"TAB"," ":"SPACE","\b":"BACK_SPACE","\r":"ENTER","*":"MULTIPLY","+":"PLUS","-":"MINUS",".":"PERIOD","/":"SLASH",";":"SEMICOLON",":":"COLON","=":"EQUALS",",":"COMMA","`":"BACK_QUOTE","\\":"BACK_SLASH","'":"QUOTE",'"':"QUOTEDBL","(":"LEFT_PARENTHESIS",")":"RIGHT_PARENTHESIS"},_methods:{initRobot:0,mouseMove:1,smoothMouseMove:3,absoluteMouseMove:1,mousePress:1,mouseRelease:1,mouseWheel:1,keyPress:1,keyRelease:1,ensureVisible:1,focus:1,pause:1,click:1,type:2,move:2,drag:2,execute:1},execute:function(t,e){this._executeCb(0,{array:t,curIdx:0,cb:e})},_executeCb:function(t,e){var i=e.array,s=e.curIdx;if(e.curIdx>=i.length)this.$callback(e.cb);else{var a=i[s];if(e.curIdx++,!aria.utils.Type.isArray(a))return this.$logError("Not an array"),void 0;var n=a.shift(),r=this._methods[n];if(null==r)return this.$logError("Bad action"),void 0;if(r!=a.length)return this.$logError("Bad number of parameters"),void 0;a[r]={fn:this._executeCb,scope:this,args:e};var o=this[n]?this:this._robot[n]?this._robot:this._robot.robot;o[n].apply(o,a)}},ensureVisible:function(t,e){t=this._resolveHTMLElement(t),aria.utils.Dom.scrollIntoView(t),this.$callback(e)},focus:function(t,e){t=this._resolveHTMLElement(t),t.focus(),this.$callback(e)},pause:function(t,e){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:e,delay:t})},click:function(t,e){t=this._resolvePosition(t),null!=t&&this.execute([["mouseMove",t],["mousePress",this._robot.BUTTON1_MASK],["pause",100],["mouseRelease",this._robot.BUTTON1_MASK]],e)},type:function(t,e,i){var s=[];t&&(t=this._resolveHTMLElement(t),s.push(["focus",t]));for(var a=e.match(/(\[[^\]]+\])|([^\[])/g),n=0,r=a.length;r>n;n++){var o=a[n],l=!1,c=!0,h=!0;o.length>1?(o=o.substr(1,o.length-2).toUpperCase(),/^<.*>$/.test(o)?h=!1:/^>.*<$/.test(o)&&(c=!1),c&&h||(o=o.substr(1,o.length-2)),o=o.replace(/-/g,"_")):(l=o!=o.toLowerCase(),o=o.toUpperCase());var u=this._keys[o];null!=u&&(o=u),o=this._robot.robot.KEYS["VK_"+o],null!=o?(l&&s.push(["keyPress",this._robot.robot.KEYS.VK_SHIFT]),c&&s.push(["keyPress",o]),h&&s.push(["keyRelease",o]),l&&s.push(["keyRelease",this._robot.robot.KEYS.VK_SHIFT])):this.$logError("Unknown key: %1",[a[n]])}this.execute(s,i)},move:function(t,e,i){var s=t.duration||2e3,a=t.to;a=this._resolvePosition(a),e=e?this._resolvePosition(e):a,null!=e&&null!=a&&this._robot.robot.smoothMouseMove(e,a,s,i)},drag:function(t,e,i){var s=t.to;if(s=this._resolvePosition(s),e=e?this._resolvePosition(e):s,null!=e&&null!=s){var a=[["mouseMove",e],["mousePress",this._robot.BUTTON1_MASK],["move",t,e],["mouseRelease",this._robot.BUTTON1_MASK]];this.execute(a,i)}},_resolvePosition:function(t){var e,i=aria.utils.Dom;if(aria.utils.Type.isString(t)&&(t=this._resolveHTMLElement(t)),aria.utils.Type.isHTMLElement(t)){var s=i.getGeometry(t);e={x:s.x+s.width/2,y:s.y+s.height/2}}else{if(!t.hasOwnProperty("x")||!t.hasOwnProperty("y"))return this.$logError("Invalid position."),null;e=t}return e},_resolveGeometry:function(t){var e,i=aria.utils.Dom;if(aria.utils.Type.isString(t)&&(t=this._resolveHTMLElement(t)),aria.utils.Type.isHTMLElement(t))e=i.getGeometry(t);else{if(!(t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("width")&&t.hasOwnProperty("height")))return this.$logError("Invalid position."),null;e=t}return e},_resolveHTMLElement:function(t){var e;if(aria.utils.Type.isString(t)){if(e=aria.utils.Dom.getElementById(t),null==e)return this.$logError("HTML element was not found."),null}else{if(!aria.utils.Type.isHTMLElement(t))return this.$logError("Invalid HTML element."),null;e=t}return e}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotTestCase",$extends:"aria.jsunit.TemplateTestCase",$dependencies:["aria.jsunit.SynEvents","aria.jsunit.Robot"],$constructor:function(){this.$TemplateTestCase.constructor.call(this),this.synEvent=aria.jsunit.SynEvents},$destructor:function(){this.synEvent=null,this.$TemplateTestCase.$destructor.call(this)},$prototype:{run:function(){if(this.skipTest)this.$TemplateTestCase.run.call(this);else{var t=aria.jsunit.Robot;t.isUsable()?t.initRobot({fn:this.$TemplateTestCase.run,scope:this}):(this._startTest(),this.raiseFailure("Robot test cases require Java to be enabled"),this._endTest())}}}});
//*******************
//LOGICAL-PATH:aria/jsunit/ScreenCapture.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ScreenCapture",$dependencies:["aria.jsunit.AppletWorker"],$singleton:!0,$constructor:function(){this._applet=aria.jsunit.AppletWorker},$destructor:function(){this._applet=null,delete this._applet},$statics:{MISSING_APPLET_WORKER:"[Aria JsUnit] Missing applet communication bridge in %1"},$prototype:{_prepareInstructionString:function(t,e,i,s,a,n,r){var o=Aria.$frameworkWindow.document,l=[t,o.title,e,i||0,s||0,a||0,n||0,r||0].join(";");return l},capture:function(t){if(this._applet.isReady()){var e=t.conf,i=this._prepareInstructionString("CAPTURE",t.useCaseName,e.x,e.y,e.width,e.height,e.threshold);return this._applet.sendInstruction({instruction:i,cb:t.oncomplete,scope:t.scope,args:t.args}),e=null,!0}this.$logWarn(this.MISSING_APPLET_WORKER,this.$classpath);var s=Aria.$global.console;return s&&s.warn("Missing applet communication bridge in aria.jsunit.ScreenCapture"),!1},getResponse:function(){return this._applet.isReady()?this._applet.getResponse():(this.$logError(this.MISSING_APPLET_WORKER,this.$classpath),{code:1,reason:"Missing applet worker"})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SikuliTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SikuliTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.RobotJavaApplet"],$statics:{settings:{browserPath:""},FAILED_OPENING_BROWSER:"The browser could not be opened. Command line used: %1"},$constructor:function(){this.$TestCase.constructor.call(this),this.imagesRoot=aria.core.DownloadMgr.resolveURL(this.$package.replace(/\./g,"/",!0))+"/",this.robot=null,this.screen=null,this.KeyModifier=null,this.Key=null},$destructor:function(){this.robot=null,this.screen=null,this.KeyModifier=null,this.Key=null,this.$TestCase.$destructor.call(this)},$prototype:{testAsyncRunSikuliTest:function(){aria.jsunit.RobotJavaApplet.initRobot({fn:this._robotStarted,scope:this})},_robotStarted:function(){this.robot=aria.jsunit.RobotJavaApplet.applet,this.screen=this.robot.createSikuliScreen(),this.KeyModifier=this.robot.Packages.org.sikuli.script.KeyModifier,this.Key=this.robot.Packages.org.sikuli.script.Key;try{this.runSikuliTest()}catch(t){this.handleAsyncTestError(t)}},image:function(t){return this.robot.createPattern(this.imagesRoot+t)},runSikuliTest:function(){this.sikuliTestEnd()},sikuliTestEnd:function(){this.notifyTestEnd("testAsyncRunSikuliTest")},openURL:function(t){var e=this.settings.browserPath,i=e.replace(/\%url\%/,t),s=this.robot.createApp(i),a=s.open();return null==a?(this.$logError(this.FAILED_OPENING_BROWSER,[i]),!1):!0}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SonarReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SonarReport",$dependencies:["aria.core.Browser"],$statics:{REPORT_SEPARATOR:"###__REPORT__DELIMITER__###",LINE_SEPARATOR:"####",TAB_SEPARATOR:"#TT#"},$constructor:function(t){this.testRunner=t.testRunner;var e=(""+aria.core.Browser).replace(/ /g,"_").replace(/\./g,""),i=aria.core.Browser.environment;this.__browserInfo=e+"_"+i+"."},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){for(var t="",e=[],i=this.testRunner.getTestCases(),s=0,a=i.length;a>s;s++){var n=i[s].instance;e.push(this.__getTestCaseReport(n))}return t=e.join(this.REPORT_SEPARATOR)},__getTestCaseReport:function(t){var e=this.__formatTestCaseReport(t);return e},__getTestSuiteName:function(t){return this.__browserInfo+t.$classpath},__formatTestCaseReport:function(t){var e=["<?xml version='1.0' encoding='UTF-8' ?>"],i=this.__getTestCaseSubTests(t);t.getErrors(),e.push(["<testsuite","name='"+this.__getTestSuiteName(t)+"'","errors='"+t.getExecutionErrors().length+"'","failures='"+t.getFailures().length+"'","tests='"+i.length+"'","skipped='0'","time='"+t.getExecutionTime()/1e3+"'",">"].join(" "));for(var s=0,a=i.length;a>s;s++){var n=i[s],r=this.__formatSubTestReport(n,t);e.push(r)}e.push("</testsuite>");var o=e.join(this.LINE_SEPARATOR);return o},__getTestCaseSubTests:function(t){var e=[],i=t.getErrors();for(var s in t)if(s.match(/^test/)&&"function"==typeof t[s]){for(var a={name:s,status:"success",time:0,errors:[]},n=0,r=i.length;r>n;n++){var o=i[n];a.name+"()"==o.testMethod&&(a.status="error",a.errors.push(o))}e.push(a)}return e},__formatSubTestReport:function(t,e){var i="",s=t.errors;if(s.length>0){i=this.TAB_SEPARATOR+"<testcase classname='"+this.__getTestSuiteName(e)+"' time='"+t.time+"' name='"+t.name+"'>";for(var a=0,n=s.length;n>a;a++){var r=s[a];i+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+this.TAB_SEPARATOR,i+="failure"==r.state?"<failure>"+r.description+"</failure>":"<error>"+r.description+"</error>"}i+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+"</testcase>"}else i=this.TAB_SEPARATOR+"<testcase classname='"+e.$classpath+"' time='"+t.time+"' name='"+t.name+"'/>";return i}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TemplateUITestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TemplateUITestCase",$extends:"aria.jsunit.TemplateTestCase",$constructor:function(){this.$TemplateTestCase.constructor.call(this),this.screenCapture=aria.jsunit.ScreenCapture},$dependencies:["aria.jsunit.ScreenCapture"],$prototype:{capture:function(t,e){var i=this.screenCapture.capture({useCaseName:t,conf:{x:e.x?e.x:0,y:e.y?e.y:0,width:e.width?e.width:800,height:e.height?e.height:200,threshold:0},oncomplete:this._onCaptureDone,scope:this,args:{cb:e.fn,scope:e.scope}});i||e.fn.call(e.scope)},_onCaptureDone:function(t){var e=this.screenCapture.getResponse().code;this.assertTrue("0"===e,"Images are different"),t.cb.call(t.scope)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestCommunicator.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestCommunicator",$constructor:function(t){this.id=t.id,this.content="",this.init(t)},$destructor:function(){},$prototype:{init:function(t){var e=Aria.$window.document,i=e.createElement("div");i.style.cssText=["display:block","visibility:visible","height:1px","width:1px","overflow:hidden"].join(";"),i.id=this.id,e.body.appendChild(i);var s=t.content;this.content=s,i.appendChild(e.createTextNode(s))}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestRunner.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestRunner",$singleton:!0,$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.jsunit.SonarReport","aria.utils.Dom"],$constructor:function(){this._testEngine=null,this._reporter=new aria.jsunit.TestReport({testRunner:this}),this._sonarReporter=new aria.jsunit.SonarReport({testRunner:this}),this._outputDiv=null},$destructor:function(){this._testEngine&&this._testEngine.$dispose(),this._reporter&&this._reporter.$dispose(),this._sonarReporter&&this._sonarReporter.$dispose(),this._outputDiv=null},$prototype:{outputDivId:"_TestRunnerOutput_",getReporter:function(){return this._reporter},getSonarReporter:function(){return this._sonarReporter},run:function(t,e){var i=aria.utils.Dom.getElementById(this.outputDivId);if(null==i){var s=Aria.$window.document;i=s.createElement("div"),s.body.appendChild(i)}this._outputDiv=i;var a=this.getEngine();this._refreshDisplay(),this._rootTest=t,a.runTest(t,e)},_onChange:function(t){var e=t.changeType;("testStart"==e||"testEnd"==e)&&this._refreshDisplay()},_refreshDisplay:function(){var t=this._testEngine.testReport,e=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">Unit Test Report</span>',"<hr/>"];null==t?e.push("Test pending start..."):this._processOutput(t,e),e.push("</div>");var i=this._outputDiv;i.innerHTML="",i.innerHTML=e.join("")},_processOutput:function(t,e){var i="#000000",s="",a=t.instance;if("done"==t.state&&0===t.totalNbrOfFailures&&0===t.totalNbrOfErrors)i="green",s=" - OK";else if(t.totalNbrOfFailures>0||t.totalNbrOfErrors>0){i="red";var n=[];if(t.totalNbrOfFailures>0){var r=t.totalNbrOfFailures>1?" failures":" failure";n.push(t.totalNbrOfFailures+r)}if(t.totalNbrOfErrors>0){var r=t.totalNbrOfErrors>1?" errors":" error";n.push(t.totalNbrOfErrors+r)}s=" - KO: "+n.join(",")}var o="",l="";if("done"==t.state){o=" in "+a.getExecutionTime()+" ms";var r=t.totalNbrOfAsserts>1?"asserts":"assert";l=" ("+t.totalNbrOfAsserts+" "+r+")"}"skipped"==t.state&&(i="green",s=" - NOT TESTED");var c=['<div style="color:',i,'">',"<b>",t.testClass,"</b> ",s," - ","<i>",t.state,o,l,"</i>",'<a href="',t.retryURL,'" target="_blank" style="color:blue"> retry</a>',"<br/>"];if("processing"===t.state&&c.splice(-1,0,'<a href=javascript:interrupt("',t.testClass,'");> skip</a>'),e.push(c.join("")),this._processFailuresOrErrors(t,"failures",e),this._processFailuresOrErrors(t,"errors",e),t.subTests&&t.subTests.length>0){e.push('<div style="margin-left:20px">');for(var h=t.subTests.length,u=0;h>u;u++)this._processOutput(t.subTests[u],e);e.push("</div>")}c=["</div>"],e.push(c.join(""))},getFailures:function(){for(var t=[],e=aria.jsunit.TestRunner.getErrors(),i=0;e.length>i;i++)t.push(e[i].testClass);return t.join(",")},getErrors:function(){var t=[],e=this.getEngineReport();return function(e){var i=e.subTests;if(aria.utils.Type.isArray(i))for(var s=0,a=i.length;a>s;s++){var n=i[s];arguments.callee(n)}var r=[];if(aria.utils.Type.isArray(e.failures)&&(r=r.concat(e.failures)),aria.utils.Type.isArray(e.errors)&&(r=r.concat(e.errors)),r.length>0){for(var o=[],s=0,a=r.length;a>s;s++){var l=r[s];o.push(l.testState+" : "+l.description)}t.push({retryURL:e.retryURL,messages:o,testClass:e.testClass})}}(e),t=t.sort(function(t,e){var i=t.testClass.toLowerCase(),s=e.testClass.toLowerCase();return i>s?1:i==s?0:-1})},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){var t=this._testEngine;return t.testReport},_processFailuresOrErrors:function(t,e,i){var s="failures"==e;if(t[e]&&t[e].length>0){i.push('<div style="margin-left:20px;color:#000000">');for(var a=t[e].length,n=0;a>n;n++){var r=t[e][n];s?i.push("Failure #"+(n+1)):i.push("Error #"+(n+1)),i.push(": "),r.description?i.push(r.description):s?i.push("Failure"):i.push("Error"),i.push(" in <i>"+r.testState+"</i>"),i.push("<br/>")}i.push("</div>")}},_getTestCases:function(t){var e=[];if(!t.$TestSuite)return[{classpath:t.$classpath,instance:t}];if(t.isSkipped()||-1==t.isSelected())return[];for(var i=t.getSubTests(),s=0,a=i.length;a>s;s++){var n=i[s];if(-1!=n.classpath.indexOf("TestSuite")){var r=this._getTestCases(n.instance);e=e.concat(r)}else e.push(n)}return e},getTestCases:function(){return this._getTestCases(this._rootTest)},interrupt:function(t){var e=this._testEngine.getCurrentTest();if(t===e.testClass&&"processing"===e.state){var i=Error("Test interrupted by the user");return e.instance.handleAsyncTestError(i,!0),!1}},getEngine:function(){return null==this._testEngine&&(this._testEngine=new aria.jsunit.TestEngine,this._testEngine.$on({change:this._onChange,scope:this})),this._testEngine}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestSuite.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestSuite",$extends:"aria.jsunit.Test",$dependencies:["aria.core.Sequencer","aria.jsunit.TestCase","aria.jsunit.TestWrapper","aria.utils.Type"],$constructor:function(){this.$Test.constructor.call(this),this._tests=[],this._subTests=[],this._sequencer=null,this._preloadSequencer=null,this._assertCount=0,this._isSelected=1,this.skipTest=!1,this.runIsolated=!1,this._isPaused=!1,this._pauseCallback=null,this._pausedTask-null},$destructor:function(){this._sequencer&&this._sequencer.$dispose(),this._preloadSequencer&&this._preloadSequencer.$dispose(),this._disposeRunningTest(),this.$Test.$destructor.call(this)},$prototype:{refreshSubTests:function(){for(var t=this._tests,e=[],i=0,s=t.length;s>i;i++){var a=t[i];e.push({classpath:a,instance:null,lastInSuite:i===s-1})}this._subTests=e},getSubTests:function(){return 0===this._subTests.length&&this.refreshSubTests(),this._subTests},getSubTestSuites:function(){for(var t=[],e=this.getSubTests(),i=0,s=e.length;s>i;i++){var a=e[i],n=a.classpath;-1!=n.indexOf("TestSuite")&&t.push(a)}return t},getAllSubTestCases:function(){for(var t=[],e=this.getSubTests(),i=0,s=e.length;s>i;i++){var a=e[i];if(-1!=a.classpath.indexOf("TestSuite")){var n=a.instance.getAllSubTestCases();t=t.concat(n)}else t.push(a)}return t},getAllSubTestSuites:function(){for(var t=[],e=this.getSubTests(),i=0,s=e.length;s>i;i++){var a=e[i];if(-1!=a.classpath.indexOf("TestSuite")){t.push(a);var n=a.instance.getAllSubTestSuites();t=t.concat(n)}}return t},preload:function(){var t=this.getSubTestSuites();if(0===t.length)return this.$raiseEvent("preloadEnd");this._preloadSequencer=new aria.core.Sequencer;for(var e=0,i=t.length;i>e;e++){var s=t[e];this._preloadSequencer.addTask({name:"preload_"+e,fn:this.__preloadSubSuiteTask,scope:this,args:{suite:s},asynchronous:!0})}this._preloadSequencer.$on({end:this.__onPreloadSequenceEnd,scope:this}),this._preloadSequencer.start()},__onPreloadSequenceEnd:function(){this.$raiseEvent("preloadEnd")},__preloadSubSuiteTask:function(t,e){var i=e.suite,s=i.classpath;Aria.load({classes:[s],oncomplete:{fn:this.__onLoadSubSuiteCompleted,scope:this,args:{task:t,suite:i}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._preloadSequencer,task:t,test:i}}})},__onLoadSubSuiteCompleted:function(t){var e=t.task,i=t.suite;i.instance=Aria.getClassInstance(i.classpath),i.instance.setParentTest(this),i.instance.$on({preloadEnd:{fn:function(){this._preloadSequencer.notifyTaskEnd(e.id)},scope:this}}),i.instance.preload()},addTests:function(){for(var t=arguments,e=0,i=t.length;i>e;e++){var s=t[e];aria.utils.Type.isString(s)&&this._tests.push(s)}},getFinishedTestsCount:function(){var t=this._suitesInstances,e=this._testPassed;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];e+=s.getFinishedTestsCount()}return e},run:function(){this._startTest(),this._sequencer=new aria.core.Sequencer,this._assertCount=0;var t=this.getSubTests();if(!this.isSkipped()&&-1!==this.isSelected())for(var e=0,i=t.length;i>e;e++){var s=t[e];this._sequencer.addTask({name:"Test_"+e,fn:this.__runTestTask,scope:this,args:{test:s},asynchronous:!0})}this._sequencer.$on({end:this._onSequencerEnd,scope:this}),this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath}),this._sequencer.start()},isSkipped:function(){return this.skipTest===!0},__runTestTask:function(t,e){var i=e.test,s=i.classpath;Aria.load({classes:[s],oncomplete:{fn:this._execTestTask,scope:this,args:{task:t,test:i}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._sequencer,task:t,test:i}}})},__onDownloadTaskError:function(t){var e=(t.task,t.test);t.sequencer;var i="Loading of "+e.classpath+" failed",s=this.__getLastRuntimeError();s&&(i=s),this.$raiseEvent({name:"failure",testState:this.$classpath,description:i}),e.instance=this.__createFailedTest("$fileLoad",i,e.classpath),this._execTestTask(t)},_execTestTask:function(t){var e=t.task,i=t.test;i.instance||(i.instance=this._createTest(i.classpath)),this.__runningTest=i.instance,this.$raiseEvent({name:"testLoad",testLoader:this,testObject:i.instance}),i.instance.$on({end:{fn:this._onTestEnd,scope:this,args:{taskId:e.id,taskMgr:e.taskMgr}},stateChange:{fn:this._raiseStateChange,scope:this}}),i.instance.run()},_onTestEnd:function(t,e){if(t.nbrOfAsserts&&(this._assertCount+=t.nbrOfAsserts),this._raiseStateChange(),t.src.$unregisterListeners(this),this._disposeRunningTest(),this._isPaused){if(this._pausedTask=e,this._pauseCallback){var i=this._pauseCallback;this._pauseCallback=null,this.$callback(i)}}else e.taskMgr.notifyTaskEnd(e.taskId)},_createTest:function(t){var e;try{var i=Aria.getClassRef(t);e=this.runIsolated&&!aria.utils.Type.isInstanceOf(i.prototype,"aria.jsunit.TestSuite")?new aria.jsunit.TestWrapper(t):new i,e.setParentTest(this)}catch(s){var a="Uncaught exception while creating "+t+"\n"+"Message : "+s.message,n=this.__getLastRuntimeError();n&&(a=n),e=this.__createFailedTest("$constructor",a,t)}return e},__getLastRuntimeError:function(){var t="";if(Aria.__runtimeErrors){var e=Aria.__runtimeErrors[Aria.__runtimeErrors.length-1];t=e}return t},__createFailedTest:function(t,e,i){var s=new aria.jsunit.TestCase;return s._errors=[{type:"failure",testMethod:t,description:e}],s._failedOnCreate=!0,s.$classpath=i,s},_disposeRunningTest:function(){try{this.__runningTest&&(this.__runningTest.$dispose(),this.__runningTest.$TestCase&&this.__runningTest.assertLogsEmpty())}catch(t){var e=this.__runningTest.$classpath;this.__runningTest._errors.push({type:"failure",testMethod:"$destructor",description:"Uncaught exception while destroying "+e+"\nMessage : "+t.message}),this.$raiseEvent({name:"failure",testState:e,description:"Uncaught exception while destroying "+e+"\nMessage : "+t.message})}aria.core.Log.clearAppenders(),aria.core.Log.resetLoggingLevels(),this.__runningTest=null},_raiseStateChange:function(){this.$raiseEvent({name:"stateChange"})},isSelected:function(){return this._isSelected},setSelected:function(t){if(1!==this._isSelected){this._isSelected=1;var e=this.getParentTest();e&&t!==!1&&e.checkSelected();for(var i=this.getSubTestSuites(),s=0,a=i.length;a>s;s++){var n=i[s];n.instance.setSelected(!1)}}},setUnselected:function(t){if(-1!==this._isSelected){this._isSelected=-1;var e=this.getParentTest();e&&t!==!1&&e.checkSelected();for(var i=this.getSubTestSuites(),s=0,a=i.length;a>s;s++){var n=i[s];n.instance.setUnselected(!1)}}},checkSelected:function(){for(var t=!1,e=!1,i=this.getSubTestSuites(),s=0,a=i.length;a>s;s++){var n=i[s];1==n.instance.isSelected()?t=!0:-1==n.instance.isSelected()?e=!0:(t=!0,e=!0)}if(t&&!e)this.setSelected();else if(!t&&e&&this.getSubTests().length==i.length)this.setUnselected();else{this._isSelected=0;var r=this.getParentTest();r&&r.checkSelected()}},_onSequencerEnd:function(){this._sequencer&&(this._sequencer.$dispose(),this._sequencer=null),this._endTest(),this._isFinished=!0,this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._assertCount})},pause:function(t){this._isPaused=!0,this._pauseCallback=t},resume:function(t){if(this._isPaused=!1,this.$callback(t),this._pausedTask){var e=this._pausedTask;this._pausedTask=null,e.taskMgr.notifyTaskEnd(e.taskId)}}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestacularReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestacularReport",$dependencies:["aria.utils.Json"],$singleton:!0,$constructor:function(){var t,e=Aria.$frameworkWindow;e.parent!==e&&(t=e.parent.testacular),this._testacular=t,null==t&&(this.attachTest=Aria.empty),this._testEngine=null},$dispose:function(){this._testEngine&&this.detachTestEngine(this._testEngine),this._testacular=null},$statics:{SEVERAL_TEST_ENGINES:"Attaching several test engines to the TestacularReport is not supported."},$prototype:{isTestacularEnabled:function(){return null!=this._testacular},_onChange:function(t){var e=t.changeType,i=this._testEngine;this._testacular;var s=i.getCurrentTest(),a=null;"failure"==t.changeType?a=s.failures:"error"==t.changeType&&(a=s.errors),a&&this._testacular.error({type:e,testClass:s.testClass,details:a[a.length-1]});var n=i.isFinished();if(n){var r=this.createFinalReport(t.testReport);this._testacular.updateResult(r);var o=0===r.totalNbrOfErrors&&0===r.totalNbrOfFailures;this._testacular.complete(o)}else{var l=this.createStatusReport(t.testReport,s);this._testacular.updateStatus(l)}},attachTestEngine:function(t){if(this._testacular){if(t===this._testEngine)return;this._testEngine&&(this.$logError(this.SEVERAL_TEST_ENGINES),this.detachTestEngine(this._testEngine)),this._testEngine=t,t.$on({change:this._onChange,scope:this})}},detachTestEngine:function(t){this._testEngine==t&&(t.$unregisterListeners(this),this._testEngine=null)},createStatusReport:function(t,e){return{totalNbrOfAsserts:t.totalNbrOfAsserts,totalNbrOfErrors:t.totalNbrOfErrors,totalNbrOfFailures:t.totalNbrOfFailures,currentTest:{testClass:e.testClass,state:e.state,processingState:e.processingState}}},createFinalReport:function(t){var e=aria.utils.Json.copy(t,!1);e.executionTime=e.instance.getExecutionTime(),delete e.instance,delete e.state,delete e.processingState,e.errors||delete e.errors,e.failures||delete e.failures,delete e.retryURL;var i=e.subTests;if(i){for(var s=[],a=0,n=i.length;n>a;a++)s[a]=this.createFinalReport(i[a]);e.subTests=s}else delete e.subTests;return e}}});
//*******************
//LOGICAL-PATH:aria/jsunit/UITestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.UITestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.ScreenCapture"],$constructor:function(){this.$TestCase.constructor.call(this),this.screenCapture=aria.jsunit.ScreenCapture},$destructor:function(){this.$TestCase.$destructor.call(this),this.screenCapture=null},$prototype:{runUITest:function(t){var e=t.scope?t.scope:this,i=this.screenCapture.capture({useCaseName:t.testCaseName,conf:{x:t.x?t.x:0,y:t.y?t.y:0,width:t.width?t.width:800,height:t.height?t.width:200,threshold:0},oncomplete:t.oncomplete,scope:e});i||(i=null,t.oncomplete.call(e))},getUITestResult:function(){return this.screenCapture.getResponse()},__captureHeader:function(){this.screenCapture.capture("HomePage_Header",{x:0,y:0,width:1280,height:65,threshold:0},this.responseCallbackMethod,this)},__captureMenu:function(){this.screenCapture.capture("HomePage_Menu",{x:0,y:0,width:320,height:500,threshold:0},this.responseCallbackMethod,this)},responseCallbackMethod:function(){this.screenCapture.getResponse(this.responseCallbackMethod,this)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/helpers/OutObj.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.helpers.OutObj",$dependencies:["aria.utils.Dom"],$singleton:!0,$constructor:function(){this.testArea=null,this.store=""},$destructor:function(){this.clean()},$prototype:{createPlayground:function(t){var e=Aria.$window.document,i=e.createElement("div");i.id="playground_"+(t||"unknown_test"),e.body.appendChild(i),this.testArea=i},clean:function(){this.testArea&&(this.testArea.parentNode.removeChild(this.testArea),this.testArea=null),this.store=""},tplCtxt:{$getId:function(t){return["testOutput",t].join("_")},evalCallback:function(){return aria.jsunit.helpers.OutObj.$callback.apply(this,arguments)}},write:function(t){this.store+=t},putInDOM:function(){this.testArea.innerHTML=this.store},clearAll:function(){this.testArea.innerHTML="",this.store=""},callMacro:Aria.empty,beginSection:Aria.empty,endSection:Aria.empty}});
//*******************
//LOGICAL-PATH:aria/jsunit/WidgetTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.WidgetTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.helpers.OutObj"],$destructor:function(){this.outObj.clean(),this.outObj=null,this.$TestCase.$destructor.call(this)},$prototype:{run:function(){this.outObj=aria.jsunit.helpers.OutObj,this.outObj.createPlayground(this.$class),this.$TestCase.run.apply(this,arguments)},createAndInit:function(t,e){var i=Aria.getClassRef(t),s=new i(e,this.outObj.tplCtxt);return s.writeMarkup(this.outObj),this.outObj.putInDOM(),s.initWidget(),s}}});